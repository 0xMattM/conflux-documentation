<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-core/learn/core-space-basics/transactions/transaction_explain">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Core Space Transactions | Conflux Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.conflux123.xyz/docs/core/learn/core-space-basics/transactions/transaction_explain"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Core Space Transactions | Conflux Docs"><meta data-rh="true" name="description" content="The act of sending a transaction is the only method of storing or modifying data on the blockchain. This includes both the transfer of CFX and the modification of contract states. The process of sending a transaction consists of three steps: constructing the transaction, signing it, and finally transmitting it. Most programming languages have an SDK with a convenient method that can be used for this purpose. However, if you are looking for a deeper understanding of the underlying mechanics or if you are experiencing problems when sending transactions, this article may help."><meta data-rh="true" property="og:description" content="The act of sending a transaction is the only method of storing or modifying data on the blockchain. This includes both the transfer of CFX and the modification of contract states. The process of sending a transaction consists of three steps: constructing the transaction, signing it, and finally transmitting it. Most programming languages have an SDK with a convenient method that can be used for this purpose. However, if you are looking for a deeper understanding of the underlying mechanics or if you are experiencing problems when sending transactions, this article may help."><meta data-rh="true" name="keywords" content="transaction,to modify"><link data-rh="true" rel="icon" href="/img/logo.svg"><link data-rh="true" rel="canonical" href="https://docs.conflux123.xyz/docs/core/learn/core-space-basics/transactions/transaction_explain"><link data-rh="true" rel="alternate" href="https://docs.conflux123.xyz/docs/core/learn/core-space-basics/transactions/transaction_explain" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.conflux123.xyz/docs/core/learn/core-space-basics/transactions/transaction_explain" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Conflux Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Conflux Docs Atom Feed"><link rel="stylesheet" href="/assets/css/styles.23466ea5.css">
<link rel="preload" href="/assets/js/runtime~main.5b5167bf.js" as="script">
<link rel="preload" href="/assets/js/main.1da8ca1b.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Conflux Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Conflux Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">CONFLUXDOCS</b></a><a class="navbar__item navbar__link" href="/docs/general">General</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/core">Core</a><a class="navbar__item navbar__link" href="/docs/category/espace">eSpace</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Conflux-Chain/conflux-documentation" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/general/">General</a><button aria-label="Toggle the collapsible sidebar category &#x27;General&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/core/">Core</a><button aria-label="Toggle the collapsible sidebar category &#x27;Core&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/core/learn/">Learn</a><button aria-label="Toggle the collapsible sidebar category &#x27;Learn&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/core/learn/getting-started/">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/core/learn/core-space-basics/">Core Space Basics</a><button aria-label="Toggle the collapsible sidebar category &#x27;Core Space Basics&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core/learn/core-space-basics/addresses">Addresses</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core/learn/core-space-basics/accounts">Accounts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/core/learn/core-space-basics/transactions/">Transactions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Transactions&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/core/learn/core-space-basics/transactions/transaction_explain">Core Space Transactions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core/learn/core-space-basics/transactions/common-errors">Common Errors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core/learn/core-space-basics/transactions/why-transaction-is-pending">Why Transaction is Pending?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core/learn/core-space-basics/transactions/FAQ">FAQs</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core/learn/core-space-basics/storage">Storage</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/core/learn/core-space-basics/internal-contracts/">Internal Contracts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Internal Contracts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/core/learn/core-space-basics/sponsor-mechanism">Sponsorship Mechanism</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/core/learn/tutorial/">Tutorial</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorial&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/core/build/">Build</a><button aria-label="Toggle the collapsible sidebar category &#x27;Build&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/espace">eSpace</a><button aria-label="Toggle the collapsible sidebar category &#x27;eSpace&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/core/"><span itemprop="name">Core</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/core/learn/"><span itemprop="name">Learn</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/core/learn/core-space-basics/"><span itemprop="name">Core Space Basics</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/core/learn/core-space-basics/transactions/"><span itemprop="name">Transactions</span></a><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Core Space Transactions</span><meta itemprop="position" content="5"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Core Space Transactions</h1></header><p>The act of sending a transaction is the only method of storing or modifying data on the blockchain. This includes both the transfer of CFX and the modification of contract states. The process of sending a transaction consists of three steps: constructing the transaction, signing it, and finally transmitting it. Most programming languages have an <a href="/docs/core/build/sdks-and-tools/sdks">SDK</a> with a convenient method that can be used for this purpose. However, if you are looking for a deeper understanding of the underlying mechanics or if you are experiencing problems when sending transactions, this article may help.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="transaction-fields">Transaction Fields<a href="#transaction-fields" class="hash-link" aria-label="Direct link to Transaction Fields" title="Direct link to Transaction Fields">​</a></h2><p>In order to construct a transaction, the following fields are required:</p><ul><li><code>from</code></li><li><code>to</code></li><li><code>value</code></li><li><code>nonce</code></li><li><code>data</code></li><li><code>gas</code></li><li><code>gasPrice</code></li><li><code>storageLimit</code></li><li><code>chainId</code></li><li><code>epochHeight</code></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-fields">Basic fields<a href="#basic-fields" class="hash-link" aria-label="Direct link to Basic fields" title="Direct link to Basic fields">​</a></h3><p>The <code>from</code>, <code>to</code>, and <code>value</code> are the basic fields of a transaction. These fields correspond to the address of sender account, address of the receiver account and the amount to be transferred, respectively.</p><p>The <code>from</code> field identifies the sender of the transaction. Essentially, the &#x27;from&#x27; field tells you who is initiating the transaction and who is paying for the transaction. And in the <a href="#Signing">Signing</a> phase, the transaction will be signed with the private key of the <code>from</code> account, so you cannot specify any address as the sender. It is also important to remember that the account must have a sufficient balance to cover both the transfer amount (<code>value</code> field) and the transaction fee, otherwise the RPC will reject the transaction and it will not be sent. It&#x27;s worth mentioning that in some specific cases, Conflux&#x27;s sponsor mechanism can allow for other accounts to pay the transaction fee, allowing accounts with 0 balance to send transactions.</p><blockquote><p>In fact, the <code>from</code> field is not directly included in an encoded transaction. Generally speaking, tools such as SDKs will remove the <code>from</code> field from transaction before encoding and sign the transaction using corresponding private key. Others can recover the sender from the signature of the transaction.</p></blockquote><p>The <code>to</code> field indicates the recipient account of the transaction. If you are making a simple CFX transfer, this field should be set to the CFX recipient&#x27;s account. If you are modifying the state of a contract, the to field should be set to the address of the contract. If you are deploying a new contract, the to field is left empty.</p><p>The <code>value</code> field represents the amount of CFX to be transferred and must be set as an integer in the unit of Drip (10**-18 CFX).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nonce">nonce<a href="#nonce" class="hash-link" aria-label="Direct link to nonce" title="Direct link to nonce">​</a></h3><p>The <code>nonce</code> is the execution sequence number of transactions sent from an account. The correct value of this field can be queried using the <code>cfx_getNextNonce</code> RPC method. And here are some details about the nonce mechanism:</p><ol><li>The execution of transactions on the blockchain is in the order of nonce from small to large.</li><li>The initial value of nonce is 0, and the nonce is incremented by 1 for each transaction execution.</li><li>The nonce cannot be reused.</li><li>The nonce cannot be skipped: Suppose that the current nonce of an account is n. If the nonce of the transaction is m such that m &gt; n, then the transaction will not be executed until all transactions with nonce &lt; m have been executed.</li><li>After the transaction is sent via the <code>cfx_sendRawTransaction</code> method, it will not be executed immediately. You must wait for the miner to pack it first. Once packed, it will be executed with a delay of 5 epochs. After the transaction is executed, the nonce of the account will be increased by one.</li></ol><p>Correctly setting the nonce is critical to a successful transaction execution. A common issue for developers is when a transaction is sent but its receipt (indicating successful execution) is not available, usually due to an accidentally skipped nonce. This results in the transaction being stuck in the transaction pool, waiting for previous transactions to be executed first.</p><p>When using an SDK to construct a transaction, value of nonce field do not need to be set manually as the SDK will automatically query it using <code>cfx_getNextNonce</code>. However, if multiple transactions are sent at once, the nonce values may be reused because the return value of <code>cfx_getNextNonce</code> is not updated immediately after the previous transaction is sent. To avoid this, the developer is advised to manage the nonce manually by recording the transaction hash, incrementing the nonce by 1, and using the updated value to construct subsequent transactions.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fee-related-fields">Fee-related fields<a href="#fee-related-fields" class="hash-link" aria-label="Direct link to Fee-related fields" title="Direct link to Fee-related fields">​</a></h3><p>In the Conflux network, transactions are processed by miners who charge a fee for their service. This fee incentivises miners to participate in the network and keep it running smoothly. The fees are paid in CFX and are specified by the transaction initiator through the <code>gas</code>, <code>gasPrice</code> and <code>storageLimit</code> fields in the transaction.</p><p>The <code>gas</code> field represents the maximum amount of gas that can be used to execute the transaction. If the actual amount of gas consumed during the execution exceeds this limit, the transaction will fail. And if the actual consumption was less than the <code>gas</code> set, the sender must pay at least 75% of the <code>gas</code>, and up to 25% can be refunded, which means setting the <code>gas</code> too high is not encouraged. The gas consumption depends on the complexity of the contract code (or <code>21000</code> if it is a simple transfer transaction) and can be estimated using the <code>cfx_estimateGasAndCollateral</code> method, which returns the <code>gasUsed</code>, <code>gasLimit</code> and <code>storageCollaterized</code> fields. It is recommended to use <code>gasLimit</code> as the <code>gas</code> field.</p><p>The <code>gasPrice</code> field is the amount of Drip(10<strong>-18 CFX) the sender is willing to pay per unit of gas, and should be greater than 1G(10</strong>9). Miners prioritise transactions with higher payouts, and the <code>gasPrice</code> can be increased to speed up the processing of a stuck transaction. The <code>cfx_gasPrice</code> method provides a reasonable gas price based on network conditions.</p><p>In addition to transaction fees, the Conflux network requires the pledging of CFX for occupying new storage space or modifying existed storage during a transaction. The pledged CFX generates a 4% annual interest, which is paid to miners to subsidise their storage costs. When the occupied space is released or modified by others, the pledged CFX is returned. The <code>storageLimit</code> field specifies the upper limit of the storage space that can be occupied by a transaction. And it is recommended to use the <code>storageCollaterized</code> field of returned value from <code>cfx_estimateGasAndCollateral</code> as the <code>storageLimit</code> field.</p><p>When sending a transaction, the sender must ensure that there is sufficient balance to cover the <code>value + storageLimit * (10^18/1024) + gas * gasPrice</code>. If the balance is insufficient, the transaction will be rejected by nodes. If the transaction interacts with a contract that has a sponsor, the sender only needs to ensure sufficient funds for the value cost. The current SDK provides methods to automatically set reasonable values for <code>gas</code>, <code>storageLimit</code>, and <code>gasPrice</code>, but users can also specify these values manually.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="data">data<a href="#data" class="hash-link" aria-label="Direct link to data" title="Direct link to data">​</a></h3><p>The data field of the transaction can be left blank or set to a hex-encoded byte array. This can be roughly categorized into three situations:</p><ul><li>Regular CFX transfer transaction: The <code>data</code> field is usually blank, but hex-encoded data can be set as a transaction remark or postscript.</li><li>Contract deployment transaction: <code>data</code> needs to be set as the contract&#x27;s bytecode and the parameters of the constructor (if any)</li><li>Contract call transaction: The <code>data</code> field is used to store the input data for the contract to call. The data is usually the contract method and data after parameter abi encoding. (When sending CFX to a contract, the data field is usually left blank)</li></ul><p>Smart contracts are usually written in high-level contract development languages (Solidity, vyper). You can use a compiler to obtain bytecode and abi. SDK will provide abi encoding methods for the encoding of the contract method call (encoding the method name and parameters).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-fields">Other Fields<a href="#other-fields" class="hash-link" aria-label="Direct link to Other Fields" title="Direct link to Other Fields">​</a></h3><p>The <code>chainId</code> field in transactions is used to identify the specific chain. For example, the current chainId of the Conflux network is 1029 and that of the Conflux testnet is 1. This field is included in transactions primarily to prevent replay attacks. It&#x27;s generally not necessary to fill in this field manually, as the SDK will automatically obtain the current RPC chainId through the <code>cfx_getStatus</code> method.</p><p>The <code>epochHeight</code> field is used to specify the target epoch range for a transaction. Transactions will only be executed within the range of <!-- -->[epochHeight - 100000, epochHeight + 100000]<!-- -->. If the epoch of the current chain exceeds this range, the transaction will be discarded. The SDK will also automatically set this field to the current epoch obtained by the <code>cfx_epochNumber</code> method.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="transaction-signing-and-encoding">Transaction signing and encoding<a href="#transaction-signing-and-encoding" class="hash-link" aria-label="Direct link to Transaction signing and encoding" title="Direct link to Transaction signing and encoding">​</a></h2><p>After every field of a transaction is prepared, following steps are required before it can be sent using the <code>cfx_sendRawTransaction</code> method (don&#x27;t worry, these steps are already implemented by wallets or SDKs):</p><ol><li>Prepare hash for signing: do RLP encoding in the order of <code>(nonce, gasPrice, gas, to, value, storageLimit, epochHeight, chainId, data)</code> and then apply the <code>keccak256</code> operation to the encoded result to obtain a hash.</li><li>Signing: sign the hash obtained in the previous step using the private key of the sending account and perform the ecdsaSign signature operation to obtain the values for <code>r, s, v</code>.</li><li>Transaction Encoding: Do RLP encoding in the order of <code>((nonce, gasPrice, gas, to, value, storageLimit, epochHeight, chainId, data), v, r, s)</code> and convert it into a hexadecimal string.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="differences-between-conflux-and-ethereum">Differences between Conflux and Ethereum<a href="#differences-between-conflux-and-ethereum" class="hash-link" aria-label="Direct link to Differences between Conflux and Ethereum" title="Direct link to Differences between Conflux and Ethereum">​</a></h2><p>Compared to Ethereum <code>155 transaction</code>, transactions through Conflux have several differences:</p><ul><li>Fields are different: with 2 more field <code>storageLimit</code>, and <code>epochHeight</code>.</li><li>Differences when encoding transactionss:<ol><li>The RLP structure to compute transaction hash is <code>[nonce, gasPrice, gas, to, value, storageLimit, epochHeight, chainId, data]</code></li><li>The RLP structure of a rawTx is <code>[[nonce, gasPrice, gas, to, value, storageLimit, epochHeight, chainId, data], v, r, s]</code></li></ol></li><li>The <code>v</code> value signed by ecdsaSign will not be specifically modified in Conflux, while in Ethereum, there will be some special treatments to the v value.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="related-topics">Related topics<a href="#related-topics" class="hash-link" aria-label="Direct link to Related topics" title="Direct link to Related topics">​</a></h2><ul><li><a href="/docs/core/build/json-rpc/json_rpc#cfx_sendrawtransaction">cfx_sendRawTransaction</a></li><li><a href="/docs/core/learn/core-space-basics/transactions/why-transaction-is-pending">why transaction is pending</a></li><li>reasons for transaction failure</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reasons-for-transaction-failure">Reasons for transaction failure<a href="#reasons-for-transaction-failure" class="hash-link" aria-label="Direct link to Reasons for transaction failure" title="Direct link to Reasons for transaction failure">​</a></h2><p>Based on the stage in which the transaction fails, there are three categories of failures:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rejected-by-rpc">Rejected by RPC<a href="#rejected-by-rpc" class="hash-link" aria-label="Direct link to Rejected by RPC" title="Direct link to Rejected by RPC">​</a></h3><p>The sending transaction is directly rejected by RPC. The reason for rejection can be found in the <code>message</code> field of RPC Response.</p><ol><li><code>Invalid parameters: tx&#x27;, &#x27;data&#x27;: &#x27;&quot;Failed imported to deferred pool: Tx with same nonce already inserted. To replace it, you need to specify a gas price &gt; xxx</code> The error code indicates that the same nonce has been used in the transaction pool and cannot be reused. However, you can replace an existing transaction by sending a transaction with the same nonce but higher gas price.</li><li><code>&#x27;Invalid parameters: tx&#x27;, &#x27;data&#x27;: &#x27;&quot;Transaction 0x2004b0aea956e8cfad601cd6daad5630c1a95624bad446d1966895973325136c is discarded due to a too stale nonce</code> This indicates that the same nonce used has been used in history and cannot be used again.</li><li><code>Sending transactions to invalid address. The first four bits must be 0x0 (built-in/reserved), 0x1 (user-account), or 0x8 (contract).</code> This indicates that the receiving address of the transaction is wrong.</li><li><code>Transaction {:?} is discarded due to in too distant future</code> This indicates that the transaction is using a nonce that is too large for the account&#x27;s current nonce</li><li><code>tx already exist</code> This indicates that the transaction already exists.</li></ol><p>Sometimes, the <code>data</code> of Response will also contain some error information. （This field is a hex-encoded string. The parsing method is: hex -&gt; buffer -&gt; UTF8 string）</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="execution-failed">Execution failed<a href="#execution-failed" class="hash-link" aria-label="Direct link to Execution failed" title="Direct link to Execution failed">​</a></h3><p>Execution failure is usually due to an error that occurred during the execution process of the contract, which then caused the transaction failure. Such errors are mostly caused by contract execution failures or errors returned when estimating gas cost through the estimate interface.
You can check the specific reason for the transaction failure in the <code>txExecErrorMsg</code> under receipt:</p><ol><li><code>VmError(OutOfGas)</code> The transaction specified gas fee is not enough</li><li><code>VmError(ExceedStorageLimit)</code> The transaction specified upper-limit storage is not enough</li><li><code>NotEnoughCash</code> Insufficient user balance</li><li><code>Vm reverted, Reason provided by the contract: xxxx</code> The contract execution failed with details provided. </li><li><code>VmError(BadInstruction xxxx)</code> Contract deployment failed</li><li><code>Vm reverted, xxxx</code> The contract execution failed with no details provided.</li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Conflux-Chain/conflux-documentation/edit/main/docs/core/learn/core-space-basics/transactions/what-is-transaction.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/core/learn/core-space-basics/transactions/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Transactions</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/core/learn/core-space-basics/transactions/common-errors"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Common Errors</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#transaction-fields" class="table-of-contents__link toc-highlight">Transaction Fields</a><ul><li><a href="#basic-fields" class="table-of-contents__link toc-highlight">Basic fields</a></li><li><a href="#nonce" class="table-of-contents__link toc-highlight">nonce</a></li><li><a href="#fee-related-fields" class="table-of-contents__link toc-highlight">Fee-related fields</a></li><li><a href="#data" class="table-of-contents__link toc-highlight">data</a></li><li><a href="#other-fields" class="table-of-contents__link toc-highlight">Other Fields</a></li></ul></li><li><a href="#transaction-signing-and-encoding" class="table-of-contents__link toc-highlight">Transaction signing and encoding</a></li><li><a href="#differences-between-conflux-and-ethereum" class="table-of-contents__link toc-highlight">Differences between Conflux and Ethereum</a></li><li><a href="#related-topics" class="table-of-contents__link toc-highlight">Related topics</a></li><li><a href="#reasons-for-transaction-failure" class="table-of-contents__link toc-highlight">Reasons for transaction failure</a><ul><li><a href="#rejected-by-rpc" class="table-of-contents__link toc-highlight">Rejected by RPC</a></li><li><a href="#execution-failed" class="table-of-contents__link toc-highlight">Execution failed</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/category/learn">Learn</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/learn">Mine</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/learn">Stake</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/learn">Build</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/category/contribute">Contribute</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/get-involved">Get Involved</a></li><li class="footer__item"><a href="https://github.com/documentation/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/footer_logo.svg" alt="Conflux Copyright Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="32" height="16"><img src="/img/footer_logo.svg" alt="Conflux Copyright Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="32" height="16"></div><div class="footer__copyright">Copyright © 2023 ConfluxNetwork, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.5b5167bf.js"></script>
<script src="/assets/js/main.1da8ca1b.js"></script>
</body>
</html>