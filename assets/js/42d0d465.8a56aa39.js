"use strict";(self.webpackChunkconflux_docs=self.webpackChunkconflux_docs||[]).push([[8181],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>g});var a=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=a.createContext({}),u=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},c=function(e){var n=u(e.components);return a.createElement(s.Provider,{value:n},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},h=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,l=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),p=u(t),h=o,g=p["".concat(s,".").concat(h)]||p[h]||d[h]||l;return t?a.createElement(g,r(r({ref:n},c),{},{components:t})):a.createElement(g,r({ref:n},c))}));function g(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var l=t.length,r=new Array(l);r[0]=h;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i[p]="string"==typeof e?e:o,r[1]=i;for(var u=2;u<l;u++)r[u]=t[u];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}h.displayName="MDXCreateElement"},57024:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>u});var a=t(87462),o=(t(67294),t(3905));const l={sidebar_position:5,title:"Run a PoS Node on AWS",displayed_sidebar:"generalSidebar"},r=void 0,i={unversionedId:"general/mine-stake/stake/run-pos-node-on-aws",id:"general/mine-stake/stake/run-pos-node-on-aws",title:"Run a PoS Node on AWS",description:"This tutorial will help you set up a Conflux node on AWS.",source:"@site/docs/general/mine-stake/stake/run-pos-node-on-aws.md",sourceDirName:"general/mine-stake/stake",slug:"/general/mine-stake/stake/run-pos-node-on-aws",permalink:"/docs/general/mine-stake/stake/run-pos-node-on-aws",draft:!1,editUrl:"https://github.com/Conflux-Chain/conflux-documentation/edit/main/docs/general/mine-stake/stake/run-pos-node-on-aws.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,title:"Run a PoS Node on AWS",displayed_sidebar:"generalSidebar"},sidebar:"generalSidebar",previous:{title:"Running a PoS Staking Pool",permalink:"/docs/general/mine-stake/stake/running-staking-pool"},next:{title:"FAQs",permalink:"/docs/general/mine-stake/stake/faqs"}},s={},u=[{value:"Setting up an AWS Instance",id:"setting-up-an-aws-instance",level:2},{value:"Logging in to the EC2 Instance",id:"logging-in-to-the-ec2-instance",level:2},{value:"First Steps on the Server",id:"first-steps-on-the-server",level:2},{value:"Setting Up Your Conflux Node",id:"setting-up-your-conflux-node",level:2},{value:"Installing &amp; Configuring the Conflux Client",id:"installing--configuring-the-conflux-client",level:2},{value:"Running the Conflux Client and Syncing the Node",id:"running-the-conflux-client-and-syncing-the-node",level:2}],c={toc:u},p="wrapper";function d(e){let{components:n,...t}=e;return(0,o.kt)(p,(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"This tutorial will help you set up a Conflux node on AWS."),(0,o.kt)("h2",{id:"setting-up-an-aws-instance"},"Setting up an AWS Instance"),(0,o.kt)("p",null,"In this section, you\u2019ll configure and launch an AWS EC2 instance where your Conflux PoS staking pool will be hosted."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Create an AWS account or log in your existing account."),(0,o.kt)("li",{parentName:"ol"},"In AWS, go to Services > EC2 Management Console and launch a new EC2 instance."),(0,o.kt)("li",{parentName:"ol"},"Click select on the Ubuntu Server 20.04 64-bit (x86) image. You can optionally use other Linux or Windows-based images, but we\u2019ll stick to this one in this tutorial."),(0,o.kt)("li",{parentName:"ol"},"Select the t2.large instance type and click Next: Configure Instance Details."),(0,o.kt)("li",{parentName:"ol"},"Leave the default Configure Instance Details parameters and click Next: Add Storage."),(0,o.kt)("li",{parentName:"ol"},"In Add Storage, set an image size of 700 GiB and click Review and Launch.",(0,o.kt)("admonition",{parentName:"li",type:"note"},(0,o.kt)("p",{parentName:"admonition"},"You can resize this later to 400 GiB, but this will greatly speed up the node setup process."))),(0,o.kt)("li",{parentName:"ol"},"Review the instance details and click Launch.")),(0,o.kt)("p",null,"You have successfully created and launched an EC2 instance. Now let\u2019s log in to it from our local machine."),(0,o.kt)("h2",{id:"logging-in-to-the-ec2-instance"},"Logging in to the EC2 Instance"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"In this section, you\u2019ll login to the EC2 instance for the first time."),(0,o.kt)("li",{parentName:"ol"},"Once your instance is created, in the EC2 Management Console go to Network & Security > Key Pairs. If you already have an AWS key pair, you can skip to Step 6."),(0,o.kt)("li",{parentName:"ol"},"In Key Pairs, click Create key pair."),(0,o.kt)("li",{parentName:"ol"},"Create and download a key pair."),(0,o.kt)("li",{parentName:"ol"},"In Create key pair, enter a name for your key pair (in this case, we\u2019ll enter the name conflux), then click create Create key pair."),(0,o.kt)("li",{parentName:"ol"},"Download the newly-created key pair."),(0,o.kt)("li",{parentName:"ol"},"In the EC2 Management Console, go to Instances > Instances."),(0,o.kt)("li",{parentName:"ol"},"Go to your newly-created instance details by click its Instance ID."),(0,o.kt)("li",{parentName:"ol"},"In the Instance summary, ensure that the instance state is \u201cRunning\u201d and copy its Public IPv4 address."),(0,o.kt)("li",{parentName:"ol"},"Go to your local machine\u2019s terminal, and connect to your instance. You can do this by typing:")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"You\u2019ll need to change your key pair file\u2019s permissions.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"ssh -i <path to your key pair> ubuntu@<your machine's IP address or IPv4 DNS> \n")),(0,o.kt)("ol",{start:11},(0,o.kt)("li",{parentName:"ol"},"Enter the password that you defined in your key pair.")),(0,o.kt)("p",null,"You have successfully logged in to your EC2 instance! Now let\u2019s log in to our instance and prepare the server."),(0,o.kt)("h2",{id:"first-steps-on-the-server"},"First Steps on the Server"),(0,o.kt)("p",null,"Some of the recommended first steps are the following:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Upgrade currently installed applications.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"sudo apt-get update\nsudo apt-get upgrade\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Adding a new dedicated user for your PoS node."),(0,o.kt)("li",{parentName:"ul"},"Add your user to sudoers."),(0,o.kt)("li",{parentName:"ul"},"Changing your server\u2019s hostname.")),(0,o.kt)("p",null,"None of these are essential steps, so you can skip them or save them for later."),(0,o.kt)("p",null,"Now that you have done this initial set up on your server, let\u2019s move on and set up a Conflux node following the initial steps described on this guide."),(0,o.kt)("h2",{id:"setting-up-your-conflux-node"},"Setting Up Your Conflux Node"),(0,o.kt)("p",null,"In this section, you\u2019ll download, install, configure, run, synchronize your Conflux node."),(0,o.kt)("p",null,"This will be, roughly, a two-step process:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Installing and configuring the Conflux client."),(0,o.kt)("li",{parentName:"ol"},"Running the Conflux client and syncing the node.")),(0,o.kt)("h2",{id:"installing--configuring-the-conflux-client"},"Installing & Configuring the Conflux Client"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Download the archive node snapshot. This will help us speed up the node synchronization process by downloading a recent snapshot of the chain.")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"The archivenode snapshot has a file size of around 200GB. Downloading it might take a few hours.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"wget https://github.com/conflux-fans/archive-tool \n")),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Follow the instructions on downloading the Conflux client pre-built binaries ",(0,o.kt)("a",{parentName:"p",href:"../../run-a-node/advanced-topics/downloading-conflux-client"},"here"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Follow the instructions on compiling the Conflux client from source ",(0,o.kt)("a",{parentName:"p",href:"/docs/general/run-a-node/advanced-topics/compiling-conflux-client"},"here"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Extract the archive node snapshot to conflux-rust/run"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"tar xvzf <archive-node-snapshot>.tar.gz conflux-rust/run \n")),(0,o.kt)("ol",{start:5},(0,o.kt)("li",{parentName:"ol"},"Download the latest PoS configuration file:")),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/Conflux-Chain/conflux-rust/releases/tag/v2.2.1-fixpos"},"https://github.com/Conflux-Chain/conflux-rust/releases/tag/v2.2.1-fixpos")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Check ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/Conflux-Chain/conflux-rust/releases"},"https://github.com/Conflux-Chain/conflux-rust/releases")," for the latest version.")),(0,o.kt)("ol",{start:6},(0,o.kt)("li",{parentName:"ol"},"Extract the files to conflux-rust/run")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"tar xvzf pos_config-hydra.tar.gz conflux-rust/run \n")),(0,o.kt)("ol",{start:7},(0,o.kt)("li",{parentName:"ol"},"Follow the instructions on configuring and running a Conflux node ",(0,o.kt)("a",{parentName:"li",href:"../../run-a-node"},"here"))),(0,o.kt)("h2",{id:"running-the-conflux-client-and-syncing-the-node"},"Running the Conflux Client and Syncing the Node"),(0,o.kt)("p",null,"In this process, we\u2019ll run a Conflux node. Once the node is running, it will first sync to the latest PoW block. Once this process is done it will then sync to the latest PoS block."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Run the Conflux client.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"cd run \n../target/release/conflux --config hydra.toml \n")),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},"Set a secure PoS encryption password."),(0,o.kt)("li",{parentName:"ol"},"Wait for the PoS node to sync.")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"This step might take a few hours.")),(0,o.kt)("p",null,"You have successfully installed, configured, and ran a fully-synched Conflux PoS node!"))}d.isMDXComponent=!0}}]);