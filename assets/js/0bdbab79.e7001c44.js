"use strict";(self.webpackChunkconflux_docs=self.webpackChunkconflux_docs||[]).push([[1593],{46852:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var t=n(85893),i=n(11151);const r={sidebar_position:6,title:"VM Differences",displayed_sidebar:"coreSidebar"},c=void 0,a={id:"core/core-space-basics/vm-difference",title:"VM Differences",description:"The Core Space VM is compatible with the EVM in most cases, but there are some differences. This page lists the differences between the two.",source:"@site/docs/core/core-space-basics/vm-difference.md",sourceDirName:"core/core-space-basics",slug:"/core/core-space-basics/vm-difference",permalink:"/docs/core/core-space-basics/vm-difference",draft:!1,unlisted:!1,editUrl:"https://github.com/Conflux-Chain/conflux-documentation/edit/main/docs/core/core-space-basics/vm-difference.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6,title:"VM Differences",displayed_sidebar:"coreSidebar"},sidebar:"coreSidebar",previous:{title:"Transactions",permalink:"/docs/core/core-space-basics/transaction_explain"},next:{title:"Internal Contracts",permalink:"/docs/core/core-space-basics/internal-contracts/"}},o={},l=[{value:"Address Calculation",id:"address-calculation",level:2},{value:"1820 Registry",id:"1820-registry",level:2},{value:"Opcode",id:"opcode",level:2},{value:"Block Gas Limit",id:"block-gas-limit",level:2},{value:"block.number",id:"blocknumber",level:2},{value:"Internal Contracts",id:"internal-contracts",level:2},{value:"Gas",id:"gas",level:2}];function d(e){const s={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.p,{children:"The Core Space VM is compatible with the EVM in most cases, but there are some differences. This page lists the differences between the two."}),"\n",(0,t.jsx)(s.h2,{id:"address-calculation",children:"Address Calculation"}),"\n",(0,t.jsxs)(s.p,{children:["The contract address calculation is different from Ethereum. Check ",(0,t.jsx)(s.a,{href:"addresses#contract-address-computation",children:"Core Address"})," for more details."]}),"\n",(0,t.jsx)(s.h2,{id:"1820-registry",children:"1820 Registry"}),"\n",(0,t.jsxs)(s.p,{children:["The 1820 registry is a contract that stores the addresses of other contracts that implement certain interfaces. It is used to implement the EIP-1820 standard. The 1820 registry is deployed at Core Space hex40 address ",(0,t.jsx)(s.code,{children:"0x88887eD889e776bCBe2f0f9932EcFaBcDfCd1820"})]}),"\n",(0,t.jsx)(s.h2,{id:"opcode",children:"Opcode"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["The ",(0,t.jsx)(s.code,{children:"BLOCKHASH"})," opcode can only take ",(0,t.jsx)(s.code,{children:"NUMBER-1"})," as input. (Unlike Ethereum, which takes any integer in ",(0,t.jsx)(s.code,{children:"NUMBER-256"})," to ",(0,t.jsx)(s.code,{children:"NUMBER-1"})," as input). This is the ",(0,t.jsx)(s.strong,{children:"only break opcode"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Which means the Solidity built-in function ",(0,t.jsx)(s.code,{children:"blockhash"})," can only take ",(0,t.jsx)(s.code,{children:"block.number - 1"})," as input."]}),"\n",(0,t.jsx)(s.h2,{id:"block-gas-limit",children:"Block Gas Limit"}),"\n",(0,t.jsx)(s.p,{children:"The block gas limit is fixed at 30000000."}),"\n",(0,t.jsx)(s.h2,{id:"blocknumber",children:"block.number"}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"block.number"})," is the sequence number in whole tree-graph."]}),"\n",(0,t.jsx)(s.h2,{id:"internal-contracts",children:"Internal Contracts"}),"\n",(0,t.jsxs)(s.p,{children:["Core Space has some built-in ",(0,t.jsx)(s.a,{href:"./internal-contracts/",children:"internal contracts"})," that are not in Ethereum."]}),"\n",(0,t.jsx)(s.h2,{id:"gas",children:"Gas"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["Gas used and refund: Conflux requires less gas in ",(0,t.jsx)(s.code,{children:"SSTORE"})," operation but no longer refunds resetting storage and contract destruction."]}),"\n",(0,t.jsxs)(s.li,{children:["Gas Fee Refund: In Ethereum, if a transaction's gas limit exceeds the actual gas cost, the remaining gas is fully refunded. In contrast, Conflux refunds a maximum of 1/4 of the ",(0,t.jsx)(s.strong,{children:"gas limit"}),". Setting an excessively high gas limit in Conflux can lead to additional transaction fee costs. However, no extra fees are incurred if the gas limit is set to less than 4/3 of the actual cost. Therefore, providing an accurate gas estimate for a transaction is crucial for optimizing transaction fees."]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},11151:(e,s,n)=>{n.d(s,{Z:()=>a,a:()=>c});var t=n(67294);const i={},r=t.createContext(i);function c(e){const s=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),t.createElement(r.Provider,{value:s},e.children)}}}]);