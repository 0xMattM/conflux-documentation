"use strict";(self.webpackChunkconflux_docs=self.webpackChunkconflux_docs||[]).push([[2993],{74416:(n,e,a)=>{a.r(e),a.d(e,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var t=a(85893),i=a(11151);const o={displayed_sidebar:"generalSidebar"},r="Local Variables",s={id:"general/build/smart-contracts/gas-optimization/local-variables",title:"Local Variables",description:"In many common DeFi projects, we frequently encounter various complex calculations that inevitably require defining many new local variables and updating existing global variables. It's well-known that modifying storage is significantly more expensive than making changes in memory.",source:"@site/docs/general/build/smart-contracts/gas-optimization/local-variables.md",sourceDirName:"general/build/smart-contracts/gas-optimization",slug:"/general/build/smart-contracts/gas-optimization/local-variables",permalink:"/docs/general/build/smart-contracts/gas-optimization/local-variables",draft:!1,unlisted:!1,editUrl:"https://github.com/Conflux-Chain/conflux-documentation/edit/main/docs/general/build/smart-contracts/gas-optimization/local-variables.md",tags:[],version:"current",frontMatter:{displayed_sidebar:"generalSidebar"},sidebar:"generalSidebar",previous:{title:"Error",permalink:"/docs/general/build/smart-contracts/gas-optimization/error"},next:{title:"Uint Types Gas Comparison",permalink:"/docs/general/build/smart-contracts/gas-optimization/uint"}},l={},c=[];function d(n){const e={code:"code",h1:"h1",p:"p",pre:"pre",strong:"strong",...(0,i.a)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h1,{id:"local-variables",children:"Local Variables"}),"\n",(0,t.jsx)(e.p,{children:"In many common DeFi projects, we frequently encounter various complex calculations that inevitably require defining many new local variables and updating existing global variables. It's well-known that modifying storage is significantly more expensive than making changes in memory."}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Demo Code"})}),"\n",(0,t.jsx)(e.p,{children:"Below, we present two different methods to modify storage variables and observe the gas difference."}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-solidity",children:"contract LocalVariablesExample {\n    uint globalCounter;\n\n    // gas: 4022155\n    function modifyStorageDirectly(uint iterations) external {\n        for (uint i = 0; i < iterations; i++) {\n            globalCounter++;\n        }\n    }\n\n    // gas: 1902339\n    function modifyUsingLocalVariable(uint iterations) external {\n        uint localCounter = 0;\n        for (uint i = 0; i < iterations; i++) {\n            localCounter++;\n        }\n        globalCounter = localCounter;\n    }\n}\n"})}),"\n",(0,t.jsx)(e.p,{children:"Recommendations for gas optimization:"}),"\n",(0,t.jsx)(e.p,{children:"\ud83c\udf1f For complex calculations, bypass direct storage variable manipulation to save on high gas costs. Instead, use local variables for interim modifications, then update storage variables in one go. This approach significantly reduces gas usage."})]})}function u(n={}){const{wrapper:e}={...(0,i.a)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},11151:(n,e,a)=>{a.d(e,{Z:()=>s,a:()=>r});var t=a(67294);const i={},o=t.createContext(i);function r(n){const e=t.useContext(o);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:r(n.components),t.createElement(o.Provider,{value:e},n.children)}}}]);