"use strict";(self.webpackChunkconflux_docs=self.webpackChunkconflux_docs||[]).push([[9564],{68319:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var n=t(85893),a=t(11151);const i={sidebar_position:10,title:"Gas",displayed_sidebar:"generalSidebar"},r=void 0,o={id:"general/conflux-basics/gas",title:"Gas",description:"Conflux users(both Core Space and eSpace) usually see fields like `gasFee`, `gas`, and `gasPrice` when they are sending transactions using their wallets (Fluent) or SDK. This article is going to explain in detail about what these concepts mean and how to set the values properly.",source:"@site/docs/general/conflux-basics/gas.md",sourceDirName:"general/conflux-basics",slug:"/general/conflux-basics/gas",permalink:"/docs/general/conflux-basics/gas",draft:!1,unlisted:!1,editUrl:"https://github.com/Conflux-Chain/conflux-documentation/edit/main/docs/general/conflux-basics/gas.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{sidebar_position:10,title:"Gas",displayed_sidebar:"generalSidebar"},sidebar:"generalSidebar",previous:{title:"Accounts and Addresses",permalink:"/docs/general/conflux-basics/accounts"},next:{title:"Governance Overview",permalink:"/docs/general/conflux-basics/conflux-governance/governance-overview"}},c={},l=[{value:"gasFee",id:"gasfee",level:2},{value:"Why Pay Fees",id:"why-pay-fees",level:2},{value:"What is Gas",id:"what-is-gas",level:2},{value:"Gas Limit",id:"gas-limit",level:2},{value:"gasPrice",id:"gasprice",level:2},{value:"How gasFee is Calculated",id:"how-gasfee-is-calculated",level:2},{value:"How to Set gas and gasPrice Properly",id:"how-to-set-gas-and-gasprice-properly",level:2},{value:"gasPrice",id:"gasprice-1",level:3},{value:"gas",id:"gas",level:3},{value:"FAQs",id:"faqs",level:2},{value:"1. Are there any EIP-1559 transactions in the Conflux network?",id:"1-are-there-any-eip-1559-transactions-in-the-conflux-network",level:3},{value:"Further Readings",id:"further-readings",level:2}];function h(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.p,{children:["Conflux users(both Core Space and eSpace) usually see fields like ",(0,n.jsx)(s.code,{children:"gasFee"}),", ",(0,n.jsx)(s.code,{children:"gas"}),", and ",(0,n.jsx)(s.code,{children:"gasPrice"})," when they are sending transactions using their wallets (Fluent) or SDK. This article is going to explain in detail about what these concepts mean and how to set the values properly."]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{alt:"Sign Transaction",src:t(87992).Z+"",width:"800",height:"638"})}),"\n",(0,n.jsx)(s.h2,{id:"gasfee",children:"gasFee"}),"\n",(0,n.jsxs)(s.p,{children:["In real life, when we send money to someone else at a bank, we usually have to pay transaction fees. It is the same for sending transactions in blockchains (Bitcoin, Ethereum, Conflux). ",(0,n.jsx)(s.code,{children:"gasFee"})," is the fee for sending a transaction. Usually, it needs to be paid by the native token of the chain. Take Conflux as an example, CFX is needed for paying the transaction fee (gas fee)."]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{alt:"tx gas charged",src:t(31685).Z+"",width:"1680",height:"899"})}),"\n",(0,n.jsx)(s.h2,{id:"why-pay-fees",children:"Why Pay Fees"}),"\n",(0,n.jsx)(s.p,{children:"As we all know, blockchain is in fact a decentralized ledger, which is maintained by miners. There is a cost for miners to store data and generate blocks (calculating hashes). Therefore, in order to motivate miners to actively participate in the chain maintenance and protect the network security, the blockchain consensus system is designed to include a reward mechanism for miners, and the transaction fee is one of the rewards for miners, which will be paid to miners who participate in generating blocks. This mechanism can ensure the sustainability of the entire decentralized network."}),"\n",(0,n.jsx)(s.p,{children:"In addition, the gas fee mechanism can also prevent abusive transactions and thus improve the efficiency of blockchain utilization."}),"\n",(0,n.jsx)(s.h2,{id:"what-is-gas",children:"What is Gas"}),"\n",(0,n.jsx)(s.p,{children:"The concept of gas is borrowed from the real 'gas', petrol. Vehicles consume gasoline to drive. The further a car travels, the more gasoline it consumes. In EVM blockchains, gas represents the work amount required to execute a transaction. Therefore, it is a unit that measures the amount of computation required to perform certain operations."}),"\n",(0,n.jsxs)(s.p,{children:["To provide more details, all Conflux transactions are executed by EVM, including regular CFX transfers and smart contract method calls. When these operations are executed, they are compiled into individual OPCodes. The amount of work required to execute each OPCode varies. More information for OPCode gas fees can be found ",(0,n.jsx)(s.a,{href:"https://ethereum.org/en/developers/docs/evm/opcodes/",children:"here"}),"."]}),"\n",(0,n.jsxs)(s.p,{children:["Usually, the gas consumed for a regular CFX transfer is ",(0,n.jsx)(s.code,{children:"21000"}),". A smart contract transaction usually needs more, depending on the complexity of the contract execution."]}),"\n",(0,n.jsx)(s.h2,{id:"gas-limit",children:"Gas Limit"}),"\n",(0,n.jsxs)(s.p,{children:["When constructing a transaction, the ",(0,n.jsx)(s.code,{children:"gas"})," field is very important, as the field itself means the ",(0,n.jsx)(s.code,{children:"maximum amount of gas"})," that can be consumed by the execution of the transaction."]}),"\n",(0,n.jsx)(s.p,{children:"It is very important to fill the gas field correctly. If the gas limit is set to a value less than the actual amount of gas needed, the transaction will fail. If the gas limit is set too high, you may pay more gas than you actually need to."}),"\n",(0,n.jsx)(s.admonition,{type:"info",children:(0,n.jsxs)(s.p,{children:["It should be mentioned that transaction will typically fail if the gas limit is exactly set to gas consumption due to ",(0,n.jsx)(s.a,{href:"https://eips.ethereum.org/EIPS/eip-150",children:"EIP-150"}),"."]})}),"\n",(0,n.jsx)(s.p,{children:"The maximum gas limit for a single transaction in the Conflux network is 15M. This ensures that the transactions will not overconsume EVM resources."}),"\n",(0,n.jsx)(s.h2,{id:"gasprice",children:"gasPrice"}),"\n",(0,n.jsx)(s.p,{children:"The gasPrice of a transaction is specified by the sender of the transaction and represents the fee that the person is willing to pay per unit of gas. The unit of gasPrice is GDrip, where 1 GDrip is equal to 0.000000001 CFX (10**-9 CFX)."}),"\n",(0,n.jsxs)(s.p,{children:["A transaction's gasPrice value affects how fast the transaction is packaged by miners, as miners will prioritize packaging transactions with higher gasPrice in order to make more profits. When the network is not congested, setting gasPrice to ",(0,n.jsx)(s.code,{children:"1Gdrip"})," is enough to be packed normally. However, when the network is congested, more transactions are waiting to be packed. At this time, if the gasPrice is set to be less than most other transactions, it will not be packed but keep waiting."]}),"\n",(0,n.jsx)(s.p,{children:"Therefore, if you want the transaction to be packaged quickly, you can set the gasPrice higher. Usually setting it to 10G-1000G is high enough in Conflux to ensure it is executed quickly."}),"\n",(0,n.jsx)(s.p,{children:"NOTE: Do not set gasPrice too high. It may lead to sky-high transaction fees. If gasPrice is set to 1CFX, then the fee for a regular transfer is 21000 CFX, which is quite a lot for a transaction."}),"\n",(0,n.jsx)(s.h2,{id:"how-gasfee-is-calculated",children:"How gasFee is Calculated"}),"\n",(0,n.jsxs)(s.p,{children:["gasFee is the total gas fee paid for a transaction. It is calculated as ",(0,n.jsx)(s.code,{children:"gasFee = gasUsed * gasPrice"}),". gasFee takes the smallest unit of CFX, Drip."]}),"\n",(0,n.jsxs)(s.p,{children:["Suppose there is a regular transfer of 1 CFX, the gas limit can be set to 21,000. If the gasPrice is set to 1GDrip, then the total cost of the transaction is ",(0,n.jsx)(s.code,{children:"1 + 21000 * 0.000000001 = 1.000021 CFX"}),", where 1 CFX is transferred to the recipient's account, and 0.000021 CFX is the reward for the miner."]}),"\n",(0,n.jsxs)(s.p,{children:["In addition, in a Conflux transaction, if the ",(0,n.jsx)(s.code,{children:"gas limit"})," is more than the actual amount of gas consumed (",(0,n.jsx)(s.code,{children:"gasUsed"}),"), the exceeding part will be returned. The returning amount of gas ",(0,n.jsx)(s.strong,{children:"can only be up to"})," a quarter of the ",(0,n.jsx)(s.code,{children:"gas limit"}),"."]}),"\n",(0,n.jsxs)(s.p,{children:["Suppose the gas limit for a regular CFX transfer is set to 100k and the actual execution consumed 21,000, since the gas limit for the transaction is set too high, at most 25,000 of the gas fee will be returned(25% of the gas limit). The gas used for the transaction will be ",(0,n.jsx)(s.code,{children:"0.000075 CFX"}),"."]}),"\n",(0,n.jsxs)(s.p,{children:["If the gas limit setting of the transaction is not that high, take the same example as above but set the gas limit to 25000, which is 4000 more than the actual amount used, the exceeding part is not more than a quarter of the gas limit. This part will be returned fully, and the final amount of fees charged will still be ",(0,n.jsx)(s.code,{children:"0.000021 CFX"}),"."]}),"\n",(0,n.jsx)(s.h2,{id:"how-to-set-gas-and-gasprice-properly",children:"How to Set gas and gasPrice Properly"}),"\n",(0,n.jsx)(s.p,{children:"The answer is different depending on different spaces."}),"\n",(0,n.jsx)(s.h3,{id:"gasprice-1",children:"gasPrice"}),"\n",(0,n.jsx)(s.p,{children:"The Conflux consensus don't limit the transaction gas prices and the minimum gas price depends on the miners' setting. Here are the minimum gas price settings of Confura, the public RPC endpoints supported by Conflux foundation:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"core space: 1 GDrip"}),"\n",(0,n.jsx)(s.li,{children:"eSpace: 20 GDrip"}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"Besides, it is recommended to set gas price based on core space / espace RPC return value:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["core space: ",(0,n.jsx)(s.code,{children:"cfx_gasPrice"})]}),"\n",(0,n.jsxs)(s.li,{children:["eSpace: ",(0,n.jsx)(s.code,{children:"eth_gasPrice"})]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"gas",children:"gas"}),"\n",(0,n.jsx)(s.p,{children:"For regular CFX transfers, setting the gas to 21,000 is sufficient."}),"\n",(0,n.jsx)(s.p,{children:"For contract interactions, it is recommended to set gas based on the return value of core space / espace RPC:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["core space: ",(0,n.jsx)(s.code,{children:"gasLimit"})," field of ",(0,n.jsx)(s.code,{children:"cfx_estimateGasAndCollateral"})]}),"\n",(0,n.jsxs)(s.li,{children:["eSpace: ",(0,n.jsx)(s.code,{children:"eth_estimateGas"})]}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["These methods simulates the execution of the transaction and return the estimated amount of gas used for the transaction. Actually, in most cases, the value ",(0,n.jsx)(s.code,{children:"gasUsed"})," returned by ",(0,n.jsx)(s.code,{children:"cfx_estimateGasAndCollateral"})," is accurate, but it is not recommended to use ",(0,n.jsx)(s.code,{children:"gasUsed"})," due to two main reasons:"]}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:["Due to ",(0,n.jsx)(s.a,{href:"https://eips.ethereum.org/EIPS/eip-150",children:"EIP-150"}),", setting the gas to the actual gas consumption may often lead to transaction failure."]}),"\n",(0,n.jsx)(s.li,{children:"The result is based on the current blockchain state during the simulation, but the actual execution states may be different."}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"gasLimit"})," field typically equals ",(0,n.jsx)(s.code,{children:"1.3 * gasUsed"}),". This ensures that the gas limit is sufficient for the transaction, and any excessive gas fee will be refunded."]}),"\n",(0,n.jsx)(s.h2,{id:"faqs",children:"FAQs"}),"\n",(0,n.jsx)(s.h3,{id:"1-are-there-any-eip-1559-transactions-in-the-conflux-network",children:"1. Are there any EIP-1559 transactions in the Conflux network?"}),"\n",(0,n.jsx)(s.p,{children:"Currently, in the Conflux network, there are only transactions that correspond to the EIP-155 standard."}),"\n",(0,n.jsx)(s.h2,{id:"further-readings",children:"Further Readings"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"https://ethereum.org/en/developers/docs/gas/",children:"Ethereum Developer Documentation: Gas and Fees"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"https://ethgas.io/index.html",children:"Ethereum Gas Explained"})}),"\n"]})]})}function d(e={}){const{wrapper:s}={...(0,a.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},87992:(e,s,t)=>{t.d(s,{Z:()=>n});const n=t.p+"assets/images/gas1-7cc4ad4cf93fd42551f35d2edf9566cf.png"},31685:(e,s,t)=>{t.d(s,{Z:()=>n});const n=t.p+"assets/images/tx-gas-charged-631705fab32539aea535cfd7c829ba48.jpeg"},11151:(e,s,t)=>{t.d(s,{Z:()=>o,a:()=>r});var n=t(67294);const a={},i=n.createContext(a);function r(e){const s=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);