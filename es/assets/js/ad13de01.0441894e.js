"use strict";(self.webpackChunkconflux_docs=self.webpackChunkconflux_docs||[]).push([[6903],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>f});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=o.createContext({}),l=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=l(e.components);return o.createElement(c.Provider,{value:t},e.children)},h="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),h=l(n),p=r,f=h["".concat(c,".").concat(p)]||h[p]||u[p]||a;return n?o.createElement(f,i(i({ref:t},d),{},{components:n})):o.createElement(f,i({ref:t},d))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=p;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[h]="string"==typeof e?e:r,i[1]=s;for(var l=2;l<a;l++)i[l]=n[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},81391:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var o=n(87462),r=(n(67294),n(3905));const a={title:"Trouble Shooting",sidebar_position:14,description:"How to solve common problems",displayed_sidebar:"generalSidebar"},i=void 0,s={unversionedId:"general/run-a-node/TroubleShooting",id:"general/run-a-node/TroubleShooting",title:"Trouble Shooting",description:"How to solve common problems",source:"@site/docs/general/run-a-node/TroubleShooting.md",sourceDirName:"general/run-a-node",slug:"/general/run-a-node/TroubleShooting",permalink:"/es/docs/general/run-a-node/TroubleShooting",draft:!1,editUrl:"https://crowdin.com/project/conflux/es",tags:[],version:"current",sidebarPosition:14,frontMatter:{title:"Trouble Shooting",sidebar_position:14,description:"How to solve common problems",displayed_sidebar:"generalSidebar"},sidebar:"generalSidebar",previous:{title:"FAQs",permalink:"/es/docs/general/run-a-node/nodes-faqs"},next:{title:"Hard Forks",permalink:"/es/docs/general/hardforks/"}},c={},l=[{value:"Node startup failure.",id:"node-startup-failure",level:2},{value:"Linux: illegal instruction?",id:"linux-illegal-instruction",level:3},{value:"Linux: GLIBC_2.27 not found?",id:"linux-glibc_227-not-found",level:3},{value:"kvdb_rocksdb - DB has been previously marked as corrupted, attempting repair",id:"kvdb_rocksdb---db-has-been-previously-marked-as-corrupted-attempting-repair",level:3},{value:"Err value: PKCS#8 cryptographic error",id:"err-value-pkcs8-cryptographic-error",level:3},{value:"No such device or address",id:"no-such-device-or-address",level:3},{value:"Mac System Symbol not found",id:"mac-system-symbol-not-found",level:3},{value:"Windows System  ExecutionContext exists for cur_era_genesis coresrc\block_data_managermod.rs",id:"windows-system--executioncontext-exists-for-cur_era_genesis-coresrcblock_data_managermodrs",level:3},{value:"The node crashes shortly after startup.",id:"the-node-crashes-shortly-after-startup",level:3},{value:"Node data synchronization issue.",id:"node-data-synchronization-issue",level:2},{value:"The node is unable to connect to peers after startup.",id:"the-node-is-unable-to-connect-to-peers-after-startup",level:3},{value:"How to determine if a node is running properly?",id:"how-to-determine-if-a-node-is-running-properly",level:3},{value:"How to determine if a node is synchronized to the latest block?",id:"how-to-determine-if-a-node-is-synchronized-to-the-latest-block",level:3},{value:"Why is my node not synchronizing?",id:"why-is-my-node-not-synchronizing",level:3},{value:"After restarting the node, the epoch height remains unchanged?",id:"after-restarting-the-node-the-epoch-height-remains-unchanged",level:3},{value:"Why does synchronization take a long time after restart?",id:"why-does-synchronization-take-a-long-time-after-restart",level:3},{value:"Why does the block height stop increasing?",id:"why-does-the-block-height-stop-increasing",level:3},{value:"How to check the error log?",id:"how-to-check-the-error-log",level:3},{value:"Synchronizing data from the beginning on the testnet, the synchronization process gets stuck in the middle.",id:"synchronizing-data-from-the-beginning-on-the-testnet-the-synchronization-process-gets-stuck-in-the-middle",level:3},{value:"failed to calculate mempool broadcast RTT: SystemTimeError(1.2762543s)",id:"failed-to-calculate-mempool-broadcast-rtt-systemtimeerror12762543s",level:3},{value:"Normal node running logs.",id:"normal-node-running-logs",level:2},{value:"ERROR IO Worker #2 cfxcore::con - Fail to recover state_valid",id:"error-io-worker-2-cfxcorecon---fail-to-recover-state_valid",level:3},{value:"INFO COW copy failed, check file system support",id:"info-cow-copy-failed-check-file-system-support",level:3},{value:"WARN  Socket IO Worker #2  cfxcore::tra - an unexecuted tx is garbage-collected.",id:"warn--socket-io-worker-2--cfxcoretra---an-unexecuted-tx-is-garbage-collected",level:3}],d={toc:l},h="wrapper";function u(e){let{components:t,...a}=e;return(0,r.kt)(h,(0,o.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"node-startup-failure"},"Node startup failure."),(0,r.kt)("h3",{id:"linux-illegal-instruction"},"Linux: illegal instruction?"),(0,r.kt)("p",null,"If you encounter an 'illegal instruction' error when starting the node using the official provided binary, it indicates a mismatch between your CPU instruction set and the one used to compile the binary. You may try downloading the compatible version from the release page or compile it yourself."),(0,r.kt)("h3",{id:"linux-glibc_227-not-found"},"Linux: GLIBC_2.27 not found?"),(0,r.kt)("p",null,"The Conflux binary depends on the glibc library. If it is not installed on your system or the installed version is too low, you may encounter this error."),(0,r.kt)("h3",{id:"kvdb_rocksdb---db-has-been-previously-marked-as-corrupted-attempting-repair"},"kvdb_rocksdb - DB has been previously marked as corrupted, attempting repair"),(0,r.kt)("p",null,"This error occurs because the data files of the node have been corrupted, making it unable to start. In such cases, you can try deleting the data directory and allowing the node to resynchronize the data."),(0,r.kt)("p",null,"If you want to quickly start the node, you can directly download the node data snapshot, unzip it, and start the node."),(0,r.kt)("h3",{id:"err-value-pkcs8-cryptographic-error"},"Err value: PKCS#8 cryptographic error"),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(69232).Z,width:"2234",height:"562"})),(0,r.kt)("p",null,"This error may be caused by an incorrect password input for the pos_key."),(0,r.kt)("h3",{id:"no-such-device-or-address"},"No such device or address"),(0,r.kt)("p",null,'failed to start full client: Os { code: 6, kind: Uncategorized, message: "No such device or address" }'),(0,r.kt)("p",null,"This error occurs when starting the node using Docker. The node attempts to read the pos_key password from standard input, and if it cannot be read, it returns an error. In this case, you can configure the password in the configuration file or set it as an environment variable. "),(0,r.kt)("h3",{id:"mac-system-symbol-not-found"},"Mac System Symbol not found"),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(98122).Z,width:"1680",height:"361"})),(0,r.kt)("p",null,"If this occurs, it indicates that the host system's version is too low. Currently, only systems with macOS 12 or above are supported."),(0,r.kt)("p",null,"Additionally, when running the node program on a Mac, it's important to choose the correct processor version based on your computer's architecture. M1 and x86 versions are not interchangeable."),(0,r.kt)("h3",{id:"windows-system--executioncontext-exists-for-cur_era_genesis-coresrcblock_data_managermodrs"},"Windows System  ExecutionContext exists for cur_era_genesis core\\src\\block_data_manager\\mod.rs"),(0,r.kt)("p",null,"When using a data snapshot on a Windows system to start a node, you may encounter the following error:"),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(39433).Z,width:"1186",height:"690"})),(0,r.kt)("h3",{id:"the-node-crashes-shortly-after-startup"},"The node crashes shortly after startup."),(0,r.kt)("p",null,"If this issue occurs on a Linux system, it may be due to insufficient permissions for the startup account. You can try starting it in sudo mode."),(0,r.kt)("h2",{id:"node-data-synchronization-issue"},"Node data synchronization issue."),(0,r.kt)("h3",{id:"the-node-is-unable-to-connect-to-peers-after-startup"},"The node is unable to connect to peers after startup."),(0,r.kt)("p",null,"It is possible that an incorrect configuration file was used, such as using the mainnet binary with testnet configuration, testnet binary with mainnet configuration, or ",(0,r.kt)("strong",{parentName:"p"},"not specifying a configuration file")," when starting the node."),(0,r.kt)("p",null,"The fundamental reason for not connecting to peers is often ",(0,r.kt)("strong",{parentName:"p"},"the lack of correctly specified bootnodes"),"."),(0,r.kt)("p",null,"Another possibility is that the node is unable to connect to the network due to network issues. "),(0,r.kt)("h3",{id:"how-to-determine-if-a-node-is-running-properly"},"How to determine if a node is running properly?"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Check the ",(0,r.kt)("strong",{parentName:"li"},"latest epoch")," in the running logs:")),(0,r.kt)("p",null,"If the ",(0,r.kt)("strong",{parentName:"p"},"latest epoch")," in the node's running logs keeps increasing, or if the ",(0,r.kt)("strong",{parentName:"p"},"epochNumber")," obtained through the ",(0,r.kt)("inlineCode",{parentName:"p"},"cfx_getStatus")," method continues to rise, it indicates that the node is running normally."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-txt"},"Catch-up mode: false, latest epoch: 85959xxxx\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Check ",(0,r.kt)("strong",{parentName:"li"},"StatisticsInner")," in the running logs:")),(0,r.kt)("p",null,"If the ",(0,r.kt)("strong",{parentName:"p"},"latest epoch")," in the node's running logs is not increasing, but the numbers in ",(0,r.kt)("strong",{parentName:"p"},"SyncGraphStatistics")," and ",(0,r.kt)("strong",{parentName:"p"},"ConsensusGraphStatistics")," within ",(0,r.kt)("strong",{parentName:"p"},"StatisticsInner")," keep growing, the node is still running normally."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-txt"},"Statistics: StatisticsInner { \n    sync_graph: SyncGraphStatistics { \n        inserted_block_count: 1195746, \n        inserted_header_count: 1324647 \n    }, \n    consensus_graph: ConsensusGraphStatistics { \n        inserted_block_count: 154808, \n        activated_block_count: 1305980, \n        processed_block_count: 1305982 \n    } \n}\n")),(0,r.kt)("h3",{id:"how-to-determine-if-a-node-is-synchronized-to-the-latest-block"},"How to determine if a node is synchronized to the latest block?"),(0,r.kt)("p",null,"If the node's running log shows ",(0,r.kt)("strong",{parentName:"p"},"Catch-up mode: false"),", it indicates that the node has synchronized to the latest data."),(0,r.kt)("h3",{id:"why-is-my-node-not-synchronizing"},"Why is my node not synchronizing?"),(0,r.kt)("p",null,"TODO"),(0,r.kt)("h3",{id:"after-restarting-the-node-the-epoch-height-remains-unchanged"},"After restarting the node, the epoch height remains unchanged?"),(0,r.kt)("p",null,"After restarting the node, there might be a state rebuilding operation at the era checkpoint. This process takes a considerable amount of time, ranging from half an hour to several hours. Please be patient and wait."),(0,r.kt)("h3",{id:"why-does-synchronization-take-a-long-time-after-restart"},"Why does synchronization take a long time after restart?"),(0,r.kt)("p",null,"After a node is restarted, it synchronizes data from the last checkpoint and replays block data. It will take different amounts of time according to the distance to the last checkpoint. After that, it will start synchronizing from the latest block."),(0,r.kt)("p",null,"It\u2019s normal, generally it will take a few minutes to more than ten minutes."),(0,r.kt)("h3",{id:"why-does-the-block-height-stop-increasing"},"Why does the block height stop increasing?"),(0,r.kt)("p",null,"If the block height stops increasing, you can check the log or terminal to determine whether there is any error. If there is no error, it is most likely due to network reasons, you can try to restart the node."),(0,r.kt)("h3",{id:"how-to-check-the-error-log"},"How to check the error log?"),(0,r.kt)("p",null,"If you run the node through\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"start.sh"),", you can check the error log in\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"stderr.txt"),"\xa0in the same directory."),(0,r.kt)("h3",{id:"synchronizing-data-from-the-beginning-on-the-testnet-the-synchronization-process-gets-stuck-in-the-middle"},"Synchronizing data from the beginning on the testnet, the synchronization process gets stuck in the middle."),(0,r.kt)("p",null,"To perform a full sync on the testnet, you need to increase the option ",(0,r.kt)("inlineCode",{parentName:"p"},"additional_maintained_snapshot_count")," to 50."),(0,r.kt)("h3",{id:"failed-to-calculate-mempool-broadcast-rtt-systemtimeerror12762543s"},"failed to calculate mempool broadcast RTT: SystemTimeError(1.2762543s)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"details = '''panicked at 'failed to calculate mempool broadcast RTT: SystemTimeError(1.2762543s)', core\\src\\pos\\mempool\\shared_mempool\\peer_manager.rs:400:18'''\nbacktrace = '''\n   0:     0x7ff737fa5645 - backtrace::backtrace::trace::hab5abe5046f447b5\n   1:     0x7ff737fa4aac - backtrace::capture::Backtrace::new::hd9f1f4afb992e4d5\n   2:     0x7ff73781b172 - crash_handler::setup_panic_handler::he3eed2ba07c7a235\n   3:     0x7ff7380d6cf6 - std::panicking::rust_panic_with_hook\n                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a\\/library\\std\\src\\panicking.rs:610\n   4:     0x7ff7380d6afb - std::panicking::begin_panic_handler::closure$0\n                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a\\/library\\std\\src\\panicking.rs:502\n   5:     0x7ff7380d4377 - std::sys_common::backtrace::__rust_end_short_backtrace<std::panicking::begin_panic_handler::closure$0,never$>\n                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a\\/library\\std\\src\\sys_common\\backtrace.rs:139\n   6:     0x7ff7380d67f9 - std::panicking::begin_panic_handler\n                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a\\/library\\std\\src\\panicking.rs:498\n   7:     0x7ff7384c8e10 - core::panicking::panic_fmt\n                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a\\/library\\core\\src\\panicking.rs:116\n   8:     0x7ff7384c8f23 - core::result::unwrap_failed\n                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a\\/library\\core\\src\\result.rs:1690\n   9:     0x7ff7374fcb6f - cfxcore::pos::mempool::shared_mempool::peer_manager::PeerManager::process_broadcast_ack::h66a5c6263f1cb4c5\n  10:     0x7ff7374f5e19 - cfxcore::pos::mempool::shared_mempool::coordinator::coordinator::{{closure}}::h6c1ff8196b71855b\n  11:     0x7ff737543216 - std::panicking::try::hd909c3032f511b0c\n  12:     0x7ff73776aca6 - tokio::runtime::task::harness::Harness<T,S>::complete::hf2bbf17ca3ded03d\n  13:     0x7ff73775b7ee - tokio::runtime::task::harness::Harness<T,S>::poll::h0348d72954fb7fe3\n  14:     0x7ff7379a174f - std::thread::local::LocalKey<T>::with::h1b1b4832535dd8eb\n  15:     0x7ff7379a0508 - tokio::runtime::thread_pool::worker::Context::run::h1871366c06b8b19b\n  16:     0x7ff73799f313 - tokio::runtime::thread_pool::worker::Context::run::h1871366c06b8b19b\n  17:     0x7ff737997b08 - tokio::macros::scoped_tls::ScopedKey<T>::set::h72c7679a82ac49e7\n  18:     0x7ff73799ee3a - tokio::runtime::thread_pool::worker::run::he96293bdc96c9c85\n  19:     0x7ff7379a25d5 - tokio::runtime::task::core::CoreStage<T>::poll::hfebd390d78b509ef\n  20:     0x7ff7379a6036 - std::panicking::try::h2cdfe9794da6da4e\n  21:     0x7ff7379a4150 - tokio::runtime::task::harness::Harness<T,S>::poll::h32aca2917e8ece97\n  22:     0x7ff737994efc - tokio::runtime::blocking::pool::Inner::run::h50dc8a99eae64ddb\n  23:     0x7ff737990855 - std::sys_common::backtrace::__rust_begin_short_backtrace::hd7f858c23b97e5cf\n  24:     0x7ff7379a1203 - <&T as core::fmt::Debug>::fmt::hd9ffef8910ae9eb8\n  25:     0x7ff7380dd69c - alloc::boxed::impl$44::call_once\n                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a\\library\\alloc\\src\\boxed.rs:1854\n  26:     0x7ff7380dd69c - alloc::boxed::impl$44::call_once\n                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a\\library\\alloc\\src\\boxed.rs:1854\n  27:     0x7ff7380dd69c - std::sys::windows::thread::impl$0::new::thread_start\n                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a\\/library\\std\\src\\sys\\windows\\thread.rs:58\n  28:     0x7ffc35637034 - BaseThreadInitThunk\n  29:     0x7ffc36822651 - RtlUserThreadStart\n")),(0,r.kt)("p",null,"This error is caused by the system API returning a system time that is set backward. It is recommended to synchronize the time promptly to avoid the widening of the system time deviation."),(0,r.kt)("h2",{id:"normal-node-running-logs"},"Normal node running logs."),(0,r.kt)("p",null,"During the node's operation, the following information appears, which does not affect the normal functioning of the node and can be ignored."),(0,r.kt)("h3",{id:"error-io-worker-2-cfxcorecon---fail-to-recover-state_valid"},"ERROR IO Worker #2 cfxcore::con - Fail to recover state_valid"),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(25783).Z,width:"1934",height:"184"})),(0,r.kt)("h3",{id:"info-cow-copy-failed-check-file-system-support"},"INFO COW copy failed, check file system support"),(0,r.kt)("p",null,'INFO Background Snapshot cfx_storage: - COW copy failed, check file system support. Command "cp" "-R" "--reflink=always"'),(0,r.kt)("p",null,"This message is a prompt indicating that the machine's file system does not support the Copy on Write (COW) feature. It does not affect the node's operation. If the machine supports COW, it can help improve node performance."),(0,r.kt)("h3",{id:"warn--socket-io-worker-2--cfxcoretra---an-unexecuted-tx-is-garbage-collected"},"WARN  Socket IO Worker #2  cfxcore::tra - an unexecuted tx is garbage-collected."),(0,r.kt)("p",null,"Excessive transactions in the transaction pool result in the recycling of transactions in the pool. This does not affect the normal operation of the node."))}u.isMDXComponent=!0},25783:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/failed-recover-state-valid-52adb5ef90b1ed64f51aa78dda98c136.png"},98122:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/mac-os-version-too-low-6dce84853690773713bd54ea1851c9f8.png"},69232:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/pos-key-pwd-wrong-7e7f82d37f3d3de7f8135553232959a3.png"},39433:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/snapshot-download-uncomplete-bfa0dc3b6e7c30e1e3c14908f1a0defc.jpeg"}}]);