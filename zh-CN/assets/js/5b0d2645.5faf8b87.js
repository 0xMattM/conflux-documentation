"use strict";(self.webpackChunkconflux_docs=self.webpackChunkconflux_docs||[]).push([[3185],{70937:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>d});var r=t(85893),o=t(11151);const i={displayed_sidebar:"generalSidebar"},s="Unchecked",c={id:"general/build/smart-contracts/gas-optimization/unchecked",title:"Unchecked",description:"We know that before the Solidity version 0.8, it was necessary to manually import the SafeMath library to ensure data safety and avoid overflow, thereby preventing overflow attacks.",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/general/build/smart-contracts/gas-optimization/unchecked.md",sourceDirName:"general/build/smart-contracts/gas-optimization",slug:"/general/build/smart-contracts/gas-optimization/unchecked",permalink:"/zh-CN/docs/general/build/smart-contracts/gas-optimization/unchecked",draft:!1,unlisted:!1,editUrl:"https://crowdin.com/project/conflux/zh-CN",tags:[],version:"current",frontMatter:{displayed_sidebar:"generalSidebar"},sidebar:"generalSidebar",previous:{title:"Uint \u7c7b\u578b Gas \u6bd4\u8f83",permalink:"/zh-CN/docs/general/build/smart-contracts/gas-optimization/uint"},next:{title:"Tools",permalink:"/zh-CN/docs/category/tools"}},a={},d=[];function l(e){const n={a:"a",code:"code",h1:"h1",p:"p",pre:"pre",strong:"strong",...(0,o.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"unchecked",children:"Unchecked"}),"\n",(0,r.jsx)(n.p,{children:"We know that before the Solidity version 0.8, it was necessary to manually import the SafeMath library to ensure data safety and avoid overflow, thereby preventing overflow attacks."}),"\n",(0,r.jsx)(n.p,{children:"After Solidity version 0.8, Solidity performs a check every time there is a data change to determine whether there is an overflow, thus deciding whether to throw an exception."}),"\n",(0,r.jsxs)(n.p,{children:["This also means that the check incurs additional gas costs. By using ",(0,r.jsx)(n.code,{children:"unchecked"})," wisely, it is possible to effectively remove the intermediate checking step, thus achieving the purpose of saving gas."]}),"\n",(0,r.jsxs)(n.p,{children:["Learn more: ",(0,r.jsx)(n.a,{href:"https://docs.soliditylang.org/en/v0.8.25/control-structures.html#checked-or-unchecked-arithmetic",children:"Checked or Unchecked Arithmetic"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4ee3\u7801\u6f14\u793a"})}),"\n",(0,r.jsxs)(n.p,{children:["Below, we demonstrate using both a conventional for-loop and an ",(0,r.jsx)(n.code,{children:"unchecked"})," for-loop. \u8bf7\u6ce8\u610f\uff0c\u7531\u4e8e ",(0,r.jsx)(n.code,{children:"iterations"})," \u5df2\u7ecf\u662f ",(0,r.jsx)(n.code,{children:"uint256"})," \u7c7b\u578b\uff0c\u56e0\u6b64\u4e0d\u4f1a\u6709\u6ea2\u51fa\u95ee\u9898\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"contract UncheckedExample {\n    // gas: 1910309 \n    function conventionalForLoop(uint256 iterations) external pure returns (uint256 result) {\n        for (uint256 index = 0; index < iterations; index++) {\n            result = index + 1;\n        }\n    }\n\n    // gas: 570287 \n    function uncheckedForLoop(uint256 iterations) external pure returns (uint256 result) {\n        for (uint256 index = 0; index < iterations; ) {\n            unchecked {\n                result = index + 1;\n                index++;\n            }\n        }\n    }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5173\u4e8e gas \u4f18\u5316\u7684\u5efa\u8bae\uff1a"}),"\n",(0,r.jsx)(n.p,{children:"\ud83c\udf1f In situations where security is controllable, the unchecked block can be used to save gas."})]})}function h(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},11151:(e,n,t)=>{t.d(n,{Z:()=>c,a:()=>s});var r=t(67294);const o={},i=r.createContext(o);function s(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);