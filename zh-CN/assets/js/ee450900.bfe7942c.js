"use strict";(self.webpackChunkconflux_docs=self.webpackChunkconflux_docs||[]).push([[5576],{46178:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>l});var t=n(85893),s=n(11151);const i={displayed_sidebar:"generalSidebar"},c="\u9519\u8bef",d={id:"general/build/smart-contracts/gas-optimization/error",title:"\u9519\u8bef",description:"\u5728Solidity\u4e2d\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u4ee5\u4e09\u79cd\u4e3b\u8981\u5f62\u5f0f\u5b9a\u4e49\u9519\u8bef\uff1a revert\u3001 require \u548c assert\u3002 \u4ece\u529f\u80fd\u89d2\u5ea6\u6765\u770b\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u7684\u4e3b\u8981\u533a\u522b\u6709\u4e24\u4e2a\uff1a",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/general/build/smart-contracts/gas-optimization/error.md",sourceDirName:"general/build/smart-contracts/gas-optimization",slug:"/general/build/smart-contracts/gas-optimization/error",permalink:"/zh-CN/docs/general/build/smart-contracts/gas-optimization/error",draft:!1,unlisted:!1,editUrl:"https://crowdin.com/project/conflux/zh-CN",tags:[],version:"current",frontMatter:{displayed_sidebar:"generalSidebar"},sidebar:"generalSidebar",previous:{title:"\u5e38\u91cf vs \u4e0d\u53ef\u53d8\u91cf(Constant vs Immutable)",permalink:"/zh-CN/docs/general/build/smart-contracts/gas-optimization/constant"},next:{title:"Local Variables",permalink:"/zh-CN/docs/general/build/smart-contracts/gas-optimization/local-variables"}},o={},l=[];function a(e){const r={code:"code",h1:"h1",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.h1,{id:"\u9519\u8bef",children:"\u9519\u8bef"}),"\n",(0,t.jsxs)(r.p,{children:["\u5728Solidity\u4e2d\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u4ee5\u4e09\u79cd\u4e3b\u8981\u5f62\u5f0f\u5b9a\u4e49\u9519\u8bef\uff1a ",(0,t.jsx)(r.code,{children:"revert"}),"\u3001 ",(0,t.jsx)(r.code,{children:"require"})," \u548c ",(0,t.jsx)(r.code,{children:"assert"}),"\u3002 \u4ece\u529f\u80fd\u89d2\u5ea6\u6765\u770b\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u7684\u4e3b\u8981\u533a\u522b\u6709\u4e24\u4e2a\uff1a"]}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:"\u5b83\u4eec\u662f\u5426\u53ef\u4ee5\u629b\u51fa\u5f00\u53d1\u8005\u5b9a\u4e49\u7684\u9519\u8bef\u539f\u56e0\uff1b"}),"\n",(0,t.jsx)(r.li,{children:"\u5b83\u4eec\u662f\u5426\u53ef\u4ee5\u629b\u51fa\u643a\u5e26\u53d8\u91cf\u7684\u5f00\u53d1\u8005\u5b9a\u4e49\u9519\u8bef\uff1b"}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"\u4e3b\u8981\u533a\u522b\u5982\u4e0b\uff1a"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"\u7c7b\u578b"}),(0,t.jsx)(r.th,{children:"\u81ea\u5b9a\u4e49\u539f\u56e0"}),(0,t.jsx)(r.th,{children:"\u643a\u5e26\u53d8\u91cf"}),(0,t.jsx)(r.th,{children:"\u793a\u4f8b"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"revert"})}),(0,t.jsx)(r.td,{children:"\u2705"}),(0,t.jsx)(r.td,{children:"\u2705"}),(0,t.jsx)(r.td,{children:"Reason: UnauthorizedAccess(0x05D01CAF54524A610CCF187082201120757f7AE5)"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"require"})}),(0,t.jsx)(r.td,{children:"\u2705"}),(0,t.jsx)(r.td,{children:"\u274c"}),(0,t.jsx)(r.td,{children:"\u539f\u56e0\uff1aUnauthorizedAccess"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"assert"})}),(0,t.jsx)(r.td,{children:"\u274c"}),(0,t.jsx)(r.td,{children:"\u274c"}),(0,t.jsx)(r.td,{children:"\u539f\u56e0\uff1a Assertion violated"})]})]})]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"\u4ee3\u7801\u6f14\u793a"})}),"\n",(0,t.jsx)(r.p,{children:"\u4e0b\u9762\uff0c\u6211\u4eec\u4f7f\u7528\u4e09\u79cd\u5f62\u5f0f\u7684\u9519\u8bef\u6765\u89c2\u5bdfgas\u4f7f\u7528\u7684\u53d8\u5316\uff1a"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-solidity",children:'contract Error {\n    error UnauthorizedAccess();\n\n    // gas: 164\n    function errorRevert() external pure {\n        if (true) revert UnauthorizedAccess();\n    }\n\n    // gas: 268\n    function errorRequire() external pure {\n        require(false, "UnauthorizedAccess");\n    }\n\n    // gas: 180\n    function errorAssert() external pure {\n        assert(false);\n    }\n}\n'})}),"\n",(0,t.jsx)(r.p,{children:"gas\u4f18\u5316\u5efa\u8bae\u5982\u4e0b\uff1a"}),"\n",(0,t.jsxs)(r.p,{children:["\ud83c\udf1f1. ",(0,t.jsx)(r.code,{children:"revert"})," \u6700\u4e3a\u63a8\u8350\uff0c\u56e0\u4e3a\u5b83\u65e2\u53ef\u4ee5\u629b\u51fa\u9519\u8bef\u6d88\u606f\uff0c\u4e5f\u53ef\u4ee5\u629b\u51fa\u76f8\u5173\u53d8\u91cf\u3002"]}),"\n",(0,t.jsxs)(r.p,{children:["\ud83c\udf1f2. ",(0,t.jsx)(r.code,{children:"require"})," \u4e2d\u7684\u5b57\u7b26\u4e32\u5b58\u50a8\u5728\u94fe\u4e0a\uff0c\u8fd9\u4e0d\u4ec5\u6d88\u8017\u66f4\u591a\u7684gas\uff0c\u8fd8\u589e\u52a0\u4e86\u5408\u7ea6\u5927\u5c0f\u3002 \u5efa\u8bae\u6839\u636e\u5b9e\u9645\u9700\u6c42\u9009\u62e9\u3002"]}),"\n",(0,t.jsxs)(r.p,{children:["\ud83c\udf1f3. \u5982\u679c\u6709\u4f7f\u7528 ",(0,t.jsx)(r.code,{children:"assert"})," \u7684\u573a\u666f\uff0c\u5efa\u8bae\u7528 ",(0,t.jsx)(r.code,{children:"revert"})," \u66ff\u6362\u3002"]})]})}function h(e={}){const{wrapper:r}={...(0,s.a)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},11151:(e,r,n)=>{n.d(r,{Z:()=>d,a:()=>c});var t=n(67294);const s={},i=t.createContext(s);function c(e){const r=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),t.createElement(i.Provider,{value:r},e.children)}}}]);