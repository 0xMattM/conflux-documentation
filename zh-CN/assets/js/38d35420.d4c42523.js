"use strict";(self.webpackChunkconflux_docs=self.webpackChunkconflux_docs||[]).push([[3943],{3905:(t,e,n)=>{n.d(e,{Zo:()=>p,kt:()=>f});var o=n(67294);function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e){if(null==t)return{};var n,o,a=function(t,e){if(null==t)return{};var n,o,a={},r=Object.keys(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var c=o.createContext({}),l=function(t){var e=o.useContext(c),n=e;return t&&(n="function"==typeof t?t(e):s(s({},e),t)),n},p=function(t){var e=l(t.components);return o.createElement(c.Provider,{value:e},t.children)},u="mdxType",h={inlineCode:"code",wrapper:function(t){var e=t.children;return o.createElement(o.Fragment,{},e)}},d=o.forwardRef((function(t,e){var n=t.components,a=t.mdxType,r=t.originalType,c=t.parentName,p=i(t,["components","mdxType","originalType","parentName"]),u=l(n),d=a,f=u["".concat(c,".").concat(d)]||u[d]||h[d]||r;return n?o.createElement(f,s(s({ref:e},p),{},{components:n})):o.createElement(f,s({ref:e},p))}));function f(t,e){var n=arguments,a=e&&e.mdxType;if("string"==typeof t||a){var r=n.length,s=new Array(r);s[0]=d;var i={};for(var c in e)hasOwnProperty.call(e,c)&&(i[c]=e[c]);i.originalType=t,i[u]="string"==typeof t?t:a,s[1]=i;for(var l=2;l<r;l++)s[l]=n[l];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},21199:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var o=n(87462),a=(n(67294),n(3905));const r={sidebar_position:5,title:"\u5982\u4f55\u8d5e\u52a9\u667a\u80fd\u5408\u7ea6",description:"\u4f7f\u7528 ConfluxScan\u7684\u8bfb\u53d6/\u5199\u5165\u5de5\u5177\u8d5e\u52a9\u5408\u7ea6\u3002",displayed_sidebar:"coreSidebar"},s=void 0,i={unversionedId:"core/tutorials/how-to-sponsor-contract",id:"core/tutorials/how-to-sponsor-contract",title:"\u5982\u4f55\u8d5e\u52a9\u667a\u80fd\u5408\u7ea6",description:"\u4f7f\u7528 ConfluxScan\u7684\u8bfb\u53d6/\u5199\u5165\u5de5\u5177\u8d5e\u52a9\u5408\u7ea6\u3002",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/core/tutorials/how-to-sponsor-contract.md",sourceDirName:"core/tutorials",slug:"/core/tutorials/how-to-sponsor-contract",permalink:"/zh-CN/docs/core/tutorials/how-to-sponsor-contract",draft:!1,editUrl:"https://crowdin.com/project/conflux/zh-CN",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,title:"\u5982\u4f55\u8d5e\u52a9\u667a\u80fd\u5408\u7ea6",description:"\u4f7f\u7528 ConfluxScan\u7684\u8bfb\u53d6/\u5199\u5165\u5de5\u5177\u8d5e\u52a9\u5408\u7ea6\u3002",displayed_sidebar:"coreSidebar"},sidebar:"coreSidebar",previous:{title:"\u4f7f\u7528 ChainIDE \u5f00\u53d1\u667a\u80fd\u5408\u7ea6",permalink:"/zh-CN/docs/core/tutorials/chainide"},next:{title:"Complete NFT Tutorial",permalink:"/zh-CN/docs/core/tutorials/nft-tutorial"}},c={},l=[{value:"Preparation",id:"preparation",level:2},{value:"Query Sponsor Info",id:"query-sponsor-info",level:2},{value:"Sponsor Storage",id:"sponsor-storage",level:2},{value:"Sponsor Gas",id:"sponsor-gas",level:2},{value:"Whitelist",id:"whitelist",level:2},{value:"Check Contract Storage Usage Info on ConfluxScan",id:"check-contract-storage-usage-info-on-confluxscan",level:2},{value:"Check Transactions Sponsored on ConfluxScan",id:"check-transactions-sponsored-on-confluxscan",level:2},{value:"Other Sponsor Methods",id:"other-sponsor-methods",level:2},{value:"\u5e38\u89c1\u95ee\u9898\u89e3\u7b54",id:"\u5e38\u89c1\u95ee\u9898\u89e3\u7b54",level:2},{value:"I sponsored a contract, but the transaction still failed. Why?",id:"i-sponsored-a-contract-but-the-transaction-still-failed-why",level:3}],p={toc:l},u="wrapper";function h(t){let{components:e,...r}=t;return(0,a.kt)(u,(0,o.Z)({},p,r,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Conflux Core ",(0,a.kt)("a",{parentName:"p",href:"/zh-CN/docs/core/core-space-basics/sponsor-mechanism"},"Sponsorship")," offers a user-friendly feature for new blockchain users. This tutorial will guide you on how to use the ",(0,a.kt)("a",{parentName:"p",href:"https://testnet.confluxscan.io/address/cfxtest:aaejuaaaaaaaaaaaaaaaaaaaaaaaaaaaaeprn7v0eh?tab=contract-viewer"},"ConfluxScan Read\\&Write Tool")," to sponsor a contract."),(0,a.kt)("p",null,"The Read\\&Write Tool allows users to interact with smart contracts. Any verified contract on ConfluxScan can utilize this tool to read or write data."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(22811).Z,width:"1402",height:"802"})),(0,a.kt)("h2",{id:"preparation"},"Preparation"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Install the ",(0,a.kt)("a",{parentName:"li",href:"https://fluentwallet.com/"},"Fluent")," wallet and switch to the Conflux Testnet network."),(0,a.kt)("li",{parentName:"ol"},"Acquire some test tokens from the ",(0,a.kt)("a",{parentName:"li",href:"https://faucet.confluxnetwork.org/"},"Conflux Testnet Faucet"),"."),(0,a.kt)("li",{parentName:"ol"},"Have a contract address ready, for example: ",(0,a.kt)("inlineCode",{parentName:"li"},"cfxtest:acgwyxdwpc8475n2na9uk9rfbghstg1xtumht10mue"),".")),(0,a.kt)("h2",{id:"query-sponsor-info"},"Query Sponsor Info"),(0,a.kt)("p",null,"In the ",(0,a.kt)("strong",{parentName:"p"},"Read Contract")," tab, all the contract's view methods are listed. Open any of them, input the parameter (if any), and click the ",(0,a.kt)("strong",{parentName:"p"},"Query")," button to obtain the result."),(0,a.kt)("p",null,"For instance, using ",(0,a.kt)("inlineCode",{parentName:"p"},"getSponsorForGas"),":"),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(28201).Z,width:"600",height:"258"})),(0,a.kt)("p",null,"If a ",(0,a.kt)("strong",{parentName:"p"},"Zero Address")," is returned, it signifies that the contract is not sponsored."),(0,a.kt)("h2",{id:"sponsor-storage"},"Sponsor Storage"),(0,a.kt)("p",null,"In the ",(0,a.kt)("strong",{parentName:"p"},"Write Contract")," tab, all the contract's write methods are listed. Before using it, connect your wallet."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(675).Z,width:"481",height:"229"})),(0,a.kt)("p",null,"If a write method includes a ",(0,a.kt)("strong",{parentName:"p"},"payable modifier"),", the first input box can be used to set the amount of CFX to be transferred to the contract when calling the method."),(0,a.kt)("p",null,"For example, inputting 50 means transferring 50 CFX to the contract."),(0,a.kt)("p",null,"Then click the ",(0,a.kt)("strong",{parentName:"p"},"Write")," button. A popup will appear; click ",(0,a.kt)("strong",{parentName:"p"},"Confirm")," to approve the transaction."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(32258).Z,width:"920",height:"723"})),(0,a.kt)("p",null,"After transaction execution, you can query the contract's sponsor info again."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(4122).Z,width:"480",height:"257"})),(0,a.kt)("p",null,"Half of the CFX will be converted into storage points."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(13914).Z,width:"448",height:"265"})),(0,a.kt)("h2",{id:"sponsor-gas"},"Sponsor Gas"),(0,a.kt)("p",null,"We will set 10 CFX for the gas sponsor balance, with an upper bound of ",(0,a.kt)("strong",{parentName:"p"},"1000000000000000")," Drip (",(0,a.kt)("inlineCode",{parentName:"p"},"10**15")," Drip)."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(77286).Z,width:"479",height:"302"})),(0,a.kt)("p",null,"After the transaction execution, you can query the contract's sponsor info again."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(4217).Z,width:"471",height:"260"})),(0,a.kt)("h2",{id:"whitelist"},"Whitelist"),(0,a.kt)("p",null,"Finally, add the zero address to the whitelist to use the contract without paying a gas fee."),(0,a.kt)("p",null,"For the second parameter, which is an array, pass ","[",'"0x0000000000000000000000000000000000000000"].'),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(14277).Z,width:"476",height:"238"})),(0,a.kt)("h2",{id:"check-contract-storage-usage-info-on-confluxscan"},"Check Contract Storage Usage Info on ConfluxScan"),(0,a.kt)("p",null,"You can check the contract's storage usage and sponsor balance info on the ConfluxScan contract detail page."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(87050).Z,width:"1229",height:"779"})),(0,a.kt)("h2",{id:"check-transactions-sponsored-on-confluxscan"},"Check Transactions Sponsored on ConfluxScan"),(0,a.kt)("p",null,"After setting up the sponsor, you can interact with the contract without paying gas fee. The transaction will be marked as ",(0,a.kt)("strong",{parentName:"p"},"Sponsored")," on ConfluxScan in the detail page."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(12955).Z,width:"813",height:"472"})),(0,a.kt)("h2",{id:"other-sponsor-methods"},"Other Sponsor Methods"),(0,a.kt)("p",null,"Developers can use SDKs to call the ",(0,a.kt)("inlineCode",{parentName:"p"},"SponsorWhitelistControl")," methods to sponsor a contract. For an example, see ",(0,a.kt)("a",{parentName:"p",href:"/zh-CN/docs/core/core-space-basics/internal-contracts/sponsor-whitelist-control#how-to-sponsor-a-contract"},"here"),"."),(0,a.kt)("h2",{id:"\u5e38\u89c1\u95ee\u9898\u89e3\u7b54"},"\u5e38\u89c1\u95ee\u9898\u89e3\u7b54"),(0,a.kt)("h3",{id:"i-sponsored-a-contract-but-the-transaction-still-failed-why"},"I sponsored a contract, but the transaction still failed. Why?"),(0,a.kt)("p",null,"Several reasons might cause the transaction to fail:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"The upper bound is too small."),(0,a.kt)("li",{parentName:"ol"},"The sponsor balance is insufficient."),(0,a.kt)("li",{parentName:"ol"},"The whitelist is not set correctly.")))}h.isMDXComponent=!0},14277:(t,e,n)=>{n.d(e,{Z:()=>o});const o=n.p+"assets/images/add-zero-address-whitelist-ade9dfe55f773713596de0a958fde966.png"},87050:(t,e,n)=>{n.d(e,{Z:()=>o});const o=n.p+"assets/images/contract-detail-page-55c300549098e8fc913f793a45aedc4f.jpg"},28201:(t,e,n)=>{n.d(e,{Z:()=>o});const o=n.p+"assets/images/query-gas-sponsor-081bea63c6ca3fb002b436f98444ebcc.png"},4217:(t,e,n)=>{n.d(e,{Z:()=>o});const o=n.p+"assets/images/query-sponsor-gas-balance-e6531c3dccefb470bbb5a8c50863c270.png"},4122:(t,e,n)=>{n.d(e,{Z:()=>o});const o=n.p+"assets/images/query-sponsor-storage-balance-4a752ab3385749e561a50018e3119c8e.png"},13914:(t,e,n)=>{n.d(e,{Z:()=>o});const o=n.p+"assets/images/query-storage-points-aa284b176153cc169e57fe1aeb651c6f.png"},32258:(t,e,n)=>{n.d(e,{Z:()=>o});const o=n.p+"assets/images/set-collateral-sponsor-popup-28cde293a4c43751425b9b06d48554bc.png"},675:(t,e,n)=>{n.d(e,{Z:()=>o});const o=n.p+"assets/images/set-collateral-sponsor-a2fd07e4764b2e32999f7ea5e2e311c2.png"},77286:(t,e,n)=>{n.d(e,{Z:()=>o});const o=n.p+"assets/images/set-gas-sponsor-e065291f9689765a6841bfde35b2c79b.png"},22811:(t,e,n)=>{n.d(e,{Z:()=>o});const o=n.p+"assets/images/sponsor-read-methods-0f6c4e56b2af7970a51a637fe19b8e52.png"},12955:(t,e,n)=>{n.d(e,{Z:()=>o});const o=n.p+"assets/images/tx-is-sponsored-f213138a494cec0e8bf69f4de3a75fe2.jpg"}}]);