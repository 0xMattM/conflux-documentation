"use strict";(self.webpackChunkconflux_docs=self.webpackChunkconflux_docs||[]).push([[74],{48459:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>c,toc:()=>a});var r=t(85893),s=t(11151);const o={sidebar_position:5,title:"PoSRegister",displayed_sidebar:"coreSidebar"},i=void 0,c={id:"core/core-space-basics/internal-contracts/poSRegister",title:"PoSRegister",description:"\u8fd9\u4e2a\u5408\u7ea6\u7528\u4e8e\u8ba9\u7528\u6237\u53c2\u4e0ePoS\u94fe\u3002 \u9700\u8981\u4e0e\u8fd9\u4e2a\u5408\u7ea6\u4ea4\u4e92\u624d\u80fd\u6210\u4e3aPoS\u8282\u70b9\u3002 \u8fd9\u4e2a\u5408\u7ea6\u63d0\u4f9b\u4e86\u51e0\u4e2a\u65b9\u6cd5\u6765\u589e\u52a0\u6216\u51cf\u5c11PoS\u6295\u7968\uff1a",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/core/core-space-basics/internal-contracts/poSRegister.md",sourceDirName:"core/core-space-basics/internal-contracts",slug:"/core/core-space-basics/internal-contracts/poSRegister",permalink:"/zh-CN/docs/core/core-space-basics/internal-contracts/poSRegister",draft:!1,unlisted:!1,editUrl:"https://crowdin.com/project/conflux/zh-CN",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,title:"PoSRegister",displayed_sidebar:"coreSidebar"},sidebar:"coreSidebar",previous:{title:"ConfluxContext",permalink:"/zh-CN/docs/core/core-space-basics/internal-contracts/conflux-context"},next:{title:"CrossSpaceCall",permalink:"/zh-CN/docs/core/core-space-basics/internal-contracts/crossSpaceCall"}},d={},a=[{value:"\u63a5\u53e3",id:"\u63a5\u53e3",level:2}];function l(e){const n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"\u8fd9\u4e2a\u5408\u7ea6\u7528\u4e8e\u8ba9\u7528\u6237\u53c2\u4e0ePoS\u94fe\u3002 \u9700\u8981\u4e0e\u8fd9\u4e2a\u5408\u7ea6\u4ea4\u4e92\u624d\u80fd\u6210\u4e3aPoS\u8282\u70b9\u3002 \u8fd9\u4e2a\u5408\u7ea6\u63d0\u4f9b\u4e86\u51e0\u4e2a\u65b9\u6cd5\u6765\u589e\u52a0\u6216\u51cf\u5c11PoS\u6295\u7968\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"register"})," - \u6ce8\u518c\u5230PoS\u94fe\uff0c\u6210\u4e3a\u4e00\u4e2aPoS\u8282\u70b9"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"increaseStake"})," - \u589e\u52a0PoS\u6743\u76ca"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retire"})," - \u51cf\u5c11PoS\u6743\u76ca"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u8fd8\u6709\u51e0\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u67e5\u8be2\u4e00\u4e2a\u8d26\u6237\u7684PoS\u4fe1\u606f\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"getVotes"})," - \u67e5\u8be2\u4e00\u4e2a\u8d26\u6237\u7684\u6295\u7968\u4fe1\u606f\uff0c\u5c06\u8fd4\u56de",(0,r.jsx)(n.code,{children:"totalStakedVotes"}),"\u548c",(0,r.jsx)(n.code,{children:"totalUnlockedVotes"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"identifierToAddress"})," - \u67e5\u8be2\u4e00\u4e2aPoS\u8d26\u6237\u7ed1\u5b9a\u7684PoW\u5730\u5740"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"addressToIdentifier"})," - \u67e5\u8be2\u4e00\u4e2aPoW\u8d26\u6237\u7ed1\u5b9a\u7684PoS\u5730\u5740"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u63a5\u53e3",children:"\u63a5\u53e3"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"PoSRegister"}),"\u7684hex40\u5408\u7ea6\u5730\u5740\u662f",(0,r.jsx)(n.code,{children:"0x0888000000000000000000000000000000000005"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'// SPDX-License-Identifier: MIT\npragma solidity >=0.5.0;\n\ninterface PoSRegister {\n    /**\n     * @dev Register PoS account\n     * @param indentifier - PoS account address to register\n     * @param votePower - votes count\n     * @param blsPubKey - BLS public key\n     * @param vrfPubKey - VRF public key\n     * @param blsPubKeyProof - BLS public key\'s proof of legality, used to against some attack, generated by conflux-rust fullnode\n     */\n    function register(\n        bytes32 indentifier,\n        uint64 votePower,\n        bytes calldata blsPubKey,\n        bytes calldata vrfPubKey,\n        bytes[2] calldata blsPubKeyProof\n    ) external;\n\n    /**\n     * @dev Increase specified number votes for msg.sender\n     * @param votePower - count of votes to increase\n     */\n    function increaseStake(uint64 votePower) external;\n\n    /**\n     * @dev Retire specified number votes for msg.sender\n     * @param votePower - count of votes to retire\n     */\n    function retire(uint64 votePower) external;\n\n    /**\n     * @dev Query PoS account\'s lock info. Include "totalStakedVotes" and "totalUnlockedVotes"\n     * @param identifier - PoS address\n     */\n    function getVotes(bytes32 identifier) external view returns (uint256, uint256);\n\n    /**\n     * @dev Query the PoW address binding with specified PoS address\n     * @param identifier - PoS address\n     */\n    function identifierToAddress(bytes32 identifier) external view returns (address);\n\n    /**\n     * @dev Query the PoS address binding with specified PoW address\n     * @param addr - PoW address\n     */\n    function addressToIdentifier(address addr) external view returns (bytes32);\n\n    /**\n     * @dev Emitted when register method executed successfully\n     */\n    event Register(bytes32 indexed identifier, bytes blsPubKey, bytes vrfPubKey);\n\n    /**\n     * @dev Emitted when increaseStake method executed successfully\n     */\n    event IncreaseStake(bytes32 indexed identifier, uint64 votePower);\n\n    /**\n     * @dev Emitted when retire method executed successfully\n     */\n    event Retire(bytes32 indexed identifier, uint64 votePower);\n}\n'})})]})}function u(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},11151:(e,n,t)=>{t.d(n,{Z:()=>c,a:()=>i});var r=t(67294);const s={},o=r.createContext(s);function i(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);