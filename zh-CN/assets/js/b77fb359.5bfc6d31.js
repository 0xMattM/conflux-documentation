"use strict";(self.webpackChunkconflux_docs=self.webpackChunkconflux_docs||[]).push([[8944],{57602:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var t=o(85893),i=o(11151);const a={sidebar_position:6,title:"\u914d\u7f6e\u8282\u70b9",displayed_sidebar:"generalSidebar"},r=void 0,s={id:"general/run-a-node/advanced-topics/node-configuration",title:"\u914d\u7f6e\u8282\u70b9",description:"Conflux nodes offer a rich set of configuration options, allowing the adjustment of node behavior by modifying these settings. This document provides an overview of the node configuration options and their meanings.",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/general/run-a-node/advanced-topics/node-configuration.md",sourceDirName:"general/run-a-node/advanced-topics",slug:"/general/run-a-node/advanced-topics/node-configuration",permalink:"/zh-CN/docs/general/run-a-node/advanced-topics/node-configuration",draft:!1,unlisted:!1,editUrl:"https://crowdin.com/project/conflux/zh-CN",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6,title:"\u914d\u7f6e\u8282\u70b9",displayed_sidebar:"generalSidebar"},sidebar:"generalSidebar",previous:{title:"\u7f16\u8bd1 Conflux \u8282\u70b9",permalink:"/zh-CN/docs/general/run-a-node/advanced-topics/compiling-conflux-client"},next:{title:"\u8282\u70b9\u914d\u7f6e\u6587\u4ef6",permalink:"/zh-CN/docs/general/run-a-node/advanced-topics/configuration-files"}},d={},l=[{value:"How to configure nodes.",id:"how-to-configure-nodes",level:2},{value:"Configuration File",id:"configuration-file",level:3},{value:"Command Line Parameters",id:"command-line-parameters",level:3},{value:"Introduction to Configuration File Options",id:"introduction-to-configuration-file-options",level:2},{value:"node type",id:"node-type",level:3},{value:"chain id",id:"chain-id",level:3},{value:"Core Space RPC",id:"core-space-rpc",level:3},{value:"eSpace RPC",id:"espace-rpc",level:3},{value:"Data indexing",id:"data-indexing",level:3},{value:"transaction trace",id:"transaction-trace",level:3},{value:"fullstate",id:"fullstate",level:3},{value:"cfx_getLogs/eth_getLogs related options",id:"cfx_getlogseth_getlogs-related-options",level:3},{value:"log",id:"log",level:3},{value:"pow mining",id:"pow-mining",level:3},{value:"tx pool",id:"tx-pool",level:3},{value:"storage directory",id:"storage-directory",level:3},{value:"pos_key pwd",id:"pos_key-pwd",level:3},{value:"storage optimization",id:"storage-optimization",level:3},{value:"Configuration File Example",id:"configuration-file-example",level:2},{value:"\u5e38\u89c1\u95ee\u9898\u89e3\u7b54",id:"\u5e38\u89c1\u95ee\u9898\u89e3\u7b54",level:2},{value:"I want to run a Core Space RPC node, what parameters do I need to configure?",id:"i-want-to-run-a-core-space-rpc-node-what-parameters-do-i-need-to-configure",level:3},{value:"I want to run an eSpace RPC node, what parameters do I need to configure?",id:"i-want-to-run-an-espace-rpc-node-what-parameters-do-i-need-to-configure",level:3},{value:"After my node has been running for a while, I want to enable the <code>executive_trace</code> configuration. Do I need to resynchronize the data?",id:"after-my-node-has-been-running-for-a-while-i-want-to-enable-the-executive_trace-configuration-do-i-need-to-resynchronize-the-data",level:3},{value:"Does the archive node snapshot data provided by the official source include trace data?",id:"does-the-archive-node-snapshot-data-provided-by-the-official-source-include-trace-data",level:3},{value:"After the configuration is modified, do I need to clear the data then restart the node?",id:"after-the-configuration-is-modified-do-i-need-to-clear-the-data-then-restart-the-node",level:3}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Conflux nodes offer a rich set of configuration options, allowing the adjustment of node behavior by modifying these settings. This document provides an overview of the node configuration options and their meanings."}),"\n",(0,t.jsx)(n.h2,{id:"how-to-configure-nodes",children:"How to configure nodes."}),"\n",(0,t.jsx)(n.h3,{id:"configuration-file",children:"Configuration File"}),"\n",(0,t.jsxs)(n.p,{children:["The configuration file for Conflux nodes is ",(0,t.jsx)(n.code,{children:"hydra.toml"}),", and by default, it is located in the ",(0,t.jsx)(n.code,{children:"run"})," directory where the node program is downloaded. By modifying the configuration options in this file, you can adjust the behavior of the node."]}),"\n",(0,t.jsx)(n.h3,{id:"command-line-parameters",children:"Command Line Parameters"}),"\n",(0,t.jsxs)(n.p,{children:["Nodes can also be configured using command line parameters, where the ",(0,t.jsx)(n.strong,{children:"priority of command line parameters is higher than that of the configuration file"}),". For example, the JSON-RPC port of the node can be specified using the ",(0,t.jsx)(n.code,{children:"--jsonrpc-http-port"})," parameter."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"./conflux --jsonrpc-http-port 12537\n"})}),"\n",(0,t.jsxs)(n.p,{children:["A detailed list of parameters can be viewed by running ",(0,t.jsx)(n.code,{children:"./conflux -h"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"introduction-to-configuration-file-options",children:"Introduction to Configuration File Options"}),"\n",(0,t.jsx)(n.h3,{id:"node-type",children:"node type"}),"\n",(0,t.jsxs)(n.p,{children:["Node types, with three possible values: ",(0,t.jsx)(n.code,{children:"full"}),", ",(0,t.jsx)(n.code,{children:"archive"}),", ",(0,t.jsx)(n.code,{children:"light"}),". The default value is ",(0,t.jsx)(n.code,{children:"full"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'node_type="full"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"chain-id",children:"chain id"}),"\n",(0,t.jsxs)(n.p,{children:["Chain ID, used to identify the Conflux network. The Chain ID for the Core Space mainnet is ",(0,t.jsx)(n.strong,{children:"1029"}),", and for the eSpace mainnet, it is ",(0,t.jsx)(n.strong,{children:"1030"}),". The testnets have Chain IDs of 1 and 71, respectively."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:"chain_id=1029\nevm_chain_id=1030\n"})}),"\n",(0,t.jsx)(n.p,{children:"Usually, this configuration option does not need to be modified unless you want to set up a local test network."}),"\n",(0,t.jsx)(n.h3,{id:"core-space-rpc",children:"Core Space RPC"}),"\n",(0,t.jsx)(n.p,{children:"Core Space RPC related options."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:"jsonrpc_http_port=12537 # JSON-RPC HTTP port\njsonrpc_ws_port=12535 # JSON-RPC WebSocket port\npublic_rpc_apis='safe' # JSON-RPC API namespace list\uff0cMultiple namespaces are separated by commas, and using \"all\" represents enabling all APIs.\n"})}),"\n",(0,t.jsx)(n.h3,{id:"espace-rpc",children:"eSpace RPC"}),"\n",(0,t.jsx)(n.p,{children:"eSpace RPC related options."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'jsonrpc_http_eth_port=8545\njsonrpc_ws_eth_port=8546\npublic_evm_rpc_apis = "evm"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"data-indexing",children:"Data indexing"}),"\n",(0,t.jsx)(n.p,{children:"RPC interfaces related to transactions (tx) and blocks do not support querying historical data by default. If you need to query historical data, you must enable data indexing."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:"persist_block_number_index=true\npersist_tx_index=true\n"})}),"\n",(0,t.jsx)(n.h3,{id:"transaction-trace",children:"transaction trace"}),"\n",(0,t.jsx)(n.p,{children:"transaction trace related options."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:"executive_trace=true\n"})}),"\n",(0,t.jsx)(n.p,{children:"If you want to enable this configuration, you will need to resynchronize the data."}),"\n",(0,t.jsx)(n.h3,{id:"fullstate",children:"fullstate"}),"\n",(0,t.jsx)(n.p,{children:"Fullstate mode supports querying the historical state of the blockchain."}),"\n",(0,t.jsxs)(n.p,{children:["To enable the fullstate mode for a single Space, you can specify the Space name using the ",(0,t.jsx)(n.code,{children:"single_mpt_space"})," configuration option."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'single_mpt_space = "evm" # core-space use "native"\n'})}),"\n",(0,t.jsx)(n.p,{children:"Enabling the fullstate mode for dual spaces."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:"enable_single_mpt_storage=true\n"})}),"\n",(0,t.jsx)(n.h3,{id:"cfx_getlogseth_getlogs-related-options",children:"cfx_getLogs/eth_getLogs related options"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"getLogs"})," RPC method imposes a significant performance overhead on the node. Excessive querying of data with this method can lead to high node loads. To mitigate this, adjust the following configuration option to limit the amount of data requested per ",(0,t.jsx)(n.code,{children:"getLogs"})," request."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:"get_logs_filter_max_limit=1000\nget_logs_epoch_batch_size=1000\nget_logs_filter_max_epoch_range=1000\nget_logs_filter_max_block_number_range=2000\n"})}),"\n",(0,t.jsx)(n.h3,{id:"log",children:"log"}),"\n",(0,t.jsx)(n.p,{children:"Configuration options related to node logs."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'log_conf="log.yaml" # log configuration file\nlog_file="conflux.log"\nlog_level="info" # The value should be one of "error", "warn", "info", "debug", "trace", "off"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"pow-mining",children:"pow mining"}),"\n",(0,t.jsx)(n.p,{children:"Configuration options related to Proof-of-Work (PoW) mining."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'mining_author="cfx:aarc9abycue0hhzgyrr53m6cxedgccrmmyybjgh4xg"\nstratum_listen_address="127.0.0.1"\nstratum_port=32525\nstratum_secret="aaaa"\npow_problem_window_size=1\n'})}),"\n",(0,t.jsx)(n.h3,{id:"tx-pool",children:"tx pool"}),"\n",(0,t.jsx)(n.p,{children:"Transaction pool-related configuration options."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:"tx_pool_size=50000 # tx pool size\ntx_pool_min_native_tx_gas_price=1_000_000_000 # core space tx minimum gas price\ntx_pool_min_eth_tx_gas_price=20_000_000_000 # eSpace tx minimum gas price\n"})}),"\n",(0,t.jsx)(n.h3,{id:"storage-directory",children:"storage directory"}),"\n",(0,t.jsx)(n.p,{children:"Blockchain data storage directory configuration:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'conflux_data_dir="./blockchain_data"\nblock_db_dir="./blockchain_data/blockchain_db"\nnetconf_dir="./blockchain_data/net_config"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"pos_key-pwd",children:"pos_key pwd"}),"\n",(0,t.jsx)(n.p,{children:"Password for encrypting the POS private key, used to secure the POS private key. By default, this password is set interactively through the command line during the first node startup. You can set this password through the configuration file to avoid command line interaction."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'dev_pos_private_key_encryption_password="aaaa"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"storage-optimization",children:"storage optimization"}),"\n",(0,t.jsx)(n.p,{children:"Storage optimization related options."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:"# Use isolated database for MPT table\n# Setting it to true will reduce the disk usage\n# Was introduced in v2.3.4 https://github.com/Conflux-Chain/conflux-rust/releases/tag/v2.3.4\nuse_isolated_db_for_mpt_table=true \n"})}),"\n",(0,t.jsx)(n.h2,{id:"configuration-file-example",children:"Configuration File Example"}),"\n",(0,t.jsxs)(n.p,{children:["For a more comprehensive configuration file example, you can refer to ",(0,t.jsx)(n.a,{href:"/zh-CN/docs/general/run-a-node/advanced-topics/configuration-files",children:"hydra.toml"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"\u5e38\u89c1\u95ee\u9898\u89e3\u7b54",children:"\u5e38\u89c1\u95ee\u9898\u89e3\u7b54"}),"\n",(0,t.jsx)(n.h3,{id:"i-want-to-run-a-core-space-rpc-node-what-parameters-do-i-need-to-configure",children:"I want to run a Core Space RPC node, what parameters do I need to configure?"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:"node_type=\"archive\"\njsonrpc_http_port=12537\njsonrpc_ws_port=12535\npublic_rpc_apis='safe'\npersist_block_number_index=true\npersist_tx_index=true\n"})}),"\n",(0,t.jsx)(n.h3,{id:"i-want-to-run-an-espace-rpc-node-what-parameters-do-i-need-to-configure",children:"I want to run an eSpace RPC node, what parameters do I need to configure?"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'node_type="archive"\njsonrpc_http_eth_port=8545\njsonrpc_ws_eth_port=8546\npublic_evm_rpc_apis = "evm"\npersist_block_number_index=true\npersist_tx_index=true\n'})}),"\n",(0,t.jsxs)(n.h3,{id:"after-my-node-has-been-running-for-a-while-i-want-to-enable-the-executive_trace-configuration-do-i-need-to-resynchronize-the-data",children:["After my node has been running for a while, I want to enable the ",(0,t.jsx)(n.code,{children:"executive_trace"})," configuration. Do I need to resynchronize the data?"]}),"\n",(0,t.jsx)(n.p,{children:"Yes, you need to resynchronize the data."}),"\n",(0,t.jsx)(n.h3,{id:"does-the-archive-node-snapshot-data-provided-by-the-official-source-include-trace-data",children:"Does the archive node snapshot data provided by the official source include trace data?"}),"\n",(0,t.jsx)(n.p,{children:"Yes, it does."}),"\n",(0,t.jsx)(n.h3,{id:"after-the-configuration-is-modified-do-i-need-to-clear-the-data-then-restart-the-node",children:"After the configuration is modified, do I need to clear the data then restart the node?"}),"\n",(0,t.jsx)(n.p,{children:"Depending on the situation, sometimes it does, sometimes it doesn\u2019t. If the configuration involves data store or data index, you need to restart the node if the configuration changes, for example:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"persist_tx_index"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"executive_trace"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"persist_block_number_index"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Other restart are generally not required."})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},11151:(e,n,o)=>{o.d(n,{Z:()=>s,a:()=>r});var t=o(67294);const i={},a=t.createContext(i);function r(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);