"use strict";(self.webpackChunkconflux_docs=self.webpackChunkconflux_docs||[]).push([[4070],{63099:(e,n,c)=>{c.r(n),c.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>a,frontMatter:()=>i,metadata:()=>o,toc:()=>h});var r=c(85893),s=c(11151);const i={},l="v2.0 \u7248\u672c\u66f4\u65b0",o={id:"general/hardforks/v2.0",title:"v2.0",description:"- - -",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/general/hardforks/v2.0.md",sourceDirName:"general/hardforks",slug:"/general/hardforks/v2.0",permalink:"/zh-CN/docs/general/hardforks/v2.0",draft:!1,unlisted:!1,editUrl:"https://crowdin.com/project/conflux/zh-CN",tags:[],version:"current",frontMatter:{},sidebar:"generalSidebar",previous:{title:"\u786c\u5206\u53c9",permalink:"/zh-CN/docs/general/hardforks/"},next:{title:"v2.1",permalink:"/zh-CN/docs/general/hardforks/v2.1"}},d={},h=[{value:"PoS \u5171\u8bc6\u673a\u5236",id:"pos-\u5171\u8bc6\u673a\u5236",level:2},{value:"Conflux eSpace",id:"conflux-espace",level:2},{value:"\u65b0\u589e\u7684\u5185\u90e8\u5408\u7ea6",id:"\u65b0\u589e\u7684\u5185\u90e8\u5408\u7ea6",level:2},{value:"RPC \u53d8\u66f4",id:"rpc-\u53d8\u66f4",level:2},{value:"cfx \u547d\u540d\u7a7a\u95f4 RPC \u53d8\u66f4",id:"cfx-\u547d\u540d\u7a7a\u95f4-rpc-\u53d8\u66f4",level:3},{value:"trace RPC breaking change",id:"trace-rpc-breaking-change",level:3},{value:"\u65b0\u589e\u547d\u540d\u7a7a\u95f4",id:"\u65b0\u589e\u547d\u540d\u7a7a\u95f4",level:3},{value:"eSpace eth RPC",id:"espace-eth-rpc",level:3},{value:"Conflux-rust \u914d\u7f6e\u6587\u4ef6",id:"conflux-rust-\u914d\u7f6e\u6587\u4ef6",level:2},{value:"\u4e3b\u7f51\u5347\u7ea7\u8ba1\u5212",id:"\u4e3b\u7f51\u5347\u7ea7\u8ba1\u5212",level:2},{value:"\u6d4b\u8bd5\u7f51\u5347\u7ea7\u8ba1\u5212",id:"\u6d4b\u8bd5\u7f51\u5347\u7ea7\u8ba1\u5212",level:2},{value:"\u5347\u7ea7 CIP \u5217\u8868",id:"\u5347\u7ea7-cip-\u5217\u8868",level:2},{value:"CIP-43",id:"cip-43",level:3},{value:"CIP-64",id:"cip-64",level:3},{value:"CIP-71",id:"cip-71",level:3},{value:"CIP-76",id:"cip-76",level:3},{value:"CIP-78",id:"cip-78",level:3},{value:"CIP-86",id:"cip-86",level:3},{value:"CIP-90",id:"cip-90",level:3},{value:"CIP-92",id:"cip-92",level:3}];function t(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"displayed_sidebar: generalSidebar"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h1,{id:"v20-\u7248\u672c\u66f4\u65b0",children:"v2.0 \u7248\u672c\u66f4\u65b0"}),"\n",(0,r.jsx)(n.p,{children:"\u5728 Hydra \u786c\u5206\u53c9\uff08v2.0 \u7248\u672c\uff09\u4e2d\uff0cConflux \u5c06\u901a\u8fc7 8 \u4e2a CIP\uff08Conflux \u6539\u8fdb\u63d0\u6848\uff09\u5f15\u5165\u51e0\u9879\u91cd\u5927\u5347\u7ea7\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"pos-\u5171\u8bc6\u673a\u5236",children:"PoS \u5171\u8bc6\u673a\u5236"}),"\n",(0,r.jsxs)(n.p,{children:["\u901a\u8fc7 ",(0,r.jsx)(n.a,{href:"https://github.com/Conflux-Chain/CIPs/blob/master/CIPs/cip-43.md",children:"CIP-43"}),"\uff0cHydra \u5f15\u5165\u4e86 PoS\uff08\u6743\u76ca\u8bc1\u660e\uff09\u7cfb\u7edf\u6765\u5b8c\u5584\u5bf9\u6574\u4e2a\u7f51\u7edc\u6700\u7ec8\u6027\u7684\u786e\u8ba4\u3002 CFX \u6301\u6709\u8005\u53ef\u4ee5\u5c06\u5176 CFX \u8d28\u62bc\u5230 PoS\uff0c\u4ee5\u4fdd\u62a4\u9ad8\u4ef7\u503c\u4ea4\u6613\uff0c\u5e76\u4e14\u8fd8\u53ef\u4ee5\u901a\u8fc7\u53c2\u4e0e PoS \u83b7\u5f97 CFX \u5956\u52b1\u3002 \u66f4\u591a\u7ec6\u8282\u8bf7\u67e5\u770b ",(0,r.jsx)(n.a,{href:"/zh-CN/docs/general/conflux-basics/consensus-mechanisms/proof-of-stake/pos_overview",children:"PoS \u6982\u8ff0"})," \u9875\u9762"]}),"\n",(0,r.jsx)(n.h2,{id:"conflux-espace",children:"Conflux eSpace"}),"\n",(0,r.jsxs)(n.p,{children:["CIP-90 \u5f15\u5165\u4e86\u4e00\u4e2a\u5168\u65b0\u7684\u5b8c\u5168\u517c\u5bb9 EVM \u7684\u7a7a\u95f4\u3002 \u8fd9\u4e2a\u65b0\u7684\u7a7a\u95f4\u88ab\u79f0\u4e3a eSpace\uff0c\u5f53\u524d\u7a7a\u95f4\u88ab\u79f0\u4e3a Core Space\u3002 eSpace \u9075\u5faa\u4e0e EVM \u76f8\u540c\u7684\u89c4\u5219\uff0c\u5e76\u652f\u6301 eth rpc\uff0c\u5982 eth_getBalance\uff0c\u56e0\u6b64\u4ee5\u592a\u574a\u751f\u6001\u7cfb\u7edf\u4e2d\u7684\u5de5\u5177\uff08web3.js, ethers.js, hardhat \u7b49\uff09\u53ef\u4ee5\u76f4\u63a5\u5728 Conflux \u4e2d\u4f7f\u7528\u3002 \u8bf7\u67e5\u770b ",(0,r.jsx)(n.a,{href:"/zh-CN/docs/espace/Overview",children:"eSpace \u6587\u6863"})," \u4ee5\u83b7\u53d6\u66f4\u591a\u4fe1\u606f\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u65b0\u589e\u7684\u5185\u90e8\u5408\u7ea6",children:"\u65b0\u589e\u7684\u5185\u90e8\u5408\u7ea6"}),"\n",(0,r.jsxs)(n.p,{children:["Hydra \u786c\u5206\u53c9\u5f15\u5165\u4e86\u4e09\u4e2a\u65b0\u7684",(0,r.jsx)(n.a,{href:"/zh-CN/docs/core/core-space-basics/internal-contracts/",children:"\u5185\u90e8\u5408\u7ea6"}),"\uff1a"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ConfluxContext"})," (CIP-64)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"PoSRegister"})," (CIP-43)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"CrossSpaceCall"})," (CIP-90)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"rpc-\u53d8\u66f4",children:"RPC \u53d8\u66f4"}),"\n",(0,r.jsx)(n.h3,{id:"cfx-\u547d\u540d\u7a7a\u95f4-rpc-\u53d8\u66f4",children:"cfx \u547d\u540d\u7a7a\u95f4 RPC \u53d8\u66f4"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u65b0\u589e\u65b9\u6cd5\uff1a ",(0,r.jsx)(n.a,{href:"/zh-CN/docs/core/build/json-rpc/cfx-namespace#cfx_getposrewardbyepoch",children:(0,r.jsx)(n.code,{children:"cfx_getPoSRewardByEpoch"})}),"\u3001 ",(0,r.jsx)(n.code,{children:"cfx_openedMethodGroups"}),"\u3001 ",(0,r.jsx)(n.a,{href:"/zh-CN/docs/core/build/json-rpc/cfx-namespace#cfx_getposeconomics",children:(0,r.jsx)(n.code,{children:"cfx_getPoSEconomics"})}),"\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:["\u65b0\u589e EpochNumber \u6807\u7b7e\uff1a",(0,r.jsx)(n.code,{children:"latest_finalized"}),"\uff0c\u8868\u793a PoS \u6700\u8fd1\u786e\u8ba4\u7684\u6700\u65b0 epoch\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"cfx_getStatus"})," \u54cd\u5e94\u65b0\u589e\u4e24\u4e2a\u5b57\u6bb5\uff1a",(0,r.jsx)(n.code,{children:"latestFinalized"}),"\u3001",(0,r.jsx)(n.code,{children:"ethereumSpaceChainId"}),"\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:["\u533a\u5757\u5934\u65b0\u589e\u5b57\u6bb5\uff1a",(0,r.jsx)(n.code,{children:"posReference"}),"\uff0c\u662f\u6307\u5f53 PoW \u533a\u5757\u88ab\u6316\u51fa\u65f6\uff0c\u5f97\u5230\u7684\u6700\u65b0 PoS \u533a\u5757\u54c8\u5e0c\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:["\u533a\u5757\u5934\u7684 ",(0,r.jsx)(n.code,{children:"\u81ea\u5b9a\u4e49"})," \u5b57\u6bb5\u7c7b\u578b\u5df2\u4ece ",(0,r.jsx)(n.code,{children:"\u6570\u5b57\u6570\u7ec4"})," \u66f4\u6539\u4e3a ",(0,r.jsx)(n.code,{children:"\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32"}),"\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'// before\ncustom: [[1, 2]]\n// after \ncustom: ["0x12"]\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Note: CIP-90 will break some block field's verifiability for example: hash"})}),"\n",(0,r.jsx)(n.h3,{id:"trace-rpc-breaking-change",children:"trace RPC breaking change"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"trace"})," RPC methods have some ",(0,r.jsx)(n.a,{href:"/zh-CN/docs/core/build/json-rpc/trace_rpc#v20-trace-breaking-change",children:"big changes"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u65b0\u589e\u547d\u540d\u7a7a\u95f4",children:"\u65b0\u589e\u547d\u540d\u7a7a\u95f4"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/zh-CN/docs/core/build/json-rpc/txpool_rpc",children:(0,r.jsx)(n.code,{children:"txpool"})})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/zh-CN/docs/core/build/json-rpc/pos_rpc",children:(0,r.jsx)(n.code,{children:"pos"})})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"espace-eth-rpc",children:"eSpace eth RPC"}),"\n",(0,r.jsxs)(n.p,{children:["The eSpace has introduced the ",(0,r.jsx)(n.code,{children:"eth"})," namespace RPC, check the ",(0,r.jsx)(n.a,{href:"/zh-CN/docs/espace/build/jsonrpc-compatibility",children:"RPC compatibility doc"})," for details"]}),"\n",(0,r.jsx)(n.h2,{id:"conflux-rust-\u914d\u7f6e\u6587\u4ef6",children:"Conflux-rust \u914d\u7f6e\u6587\u4ef6"}),"\n",(0,r.jsxs)(n.p,{children:["The mainnet config file has been renamed from ",(0,r.jsx)(n.code,{children:"tethys.toml"})," to ",(0,r.jsx)(n.code,{children:"hydra.toml"}),", the ",(0,r.jsx)(n.code,{children:"bootnodes"})," has changed and several options are added:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"jsonrpc_http_eth_port = 8545"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"jsonrpc_ws_eth_port = 8546"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:'public_evm_rpc_apis = "evm"'})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:'public_evm_rpc_apis = "evm"'})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u4e3b\u7f51\u5347\u7ea7\u8ba1\u5212",children:"\u4e3b\u7f51\u5347\u7ea7\u8ba1\u5212"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Conflux client program need to be updated before ",(0,r.jsx)(n.code,{children:"Epoch Number reaches 36935000"})," or ",(0,r.jsx)(n.code,{children:"Block Number reaches 92060600"})," (around 10:00 Feb.23th, 2022(GMT+8))"]}),"\n",(0,r.jsxs)(n.li,{children:["The PoS registration start at ",(0,r.jsx)(n.code,{children:"Block Number 92060600"})," (around Feb.23th at 12:00)"]}),"\n",(0,r.jsxs)(n.li,{children:["The PoS registration close at ",(0,r.jsx)(n.code,{children:"Block Number 92751800"})," (around Feb.25th at 12:00)"]}),"\n",(0,r.jsxs)(n.li,{children:["The deadline for adding pos_config is before ",(0,r.jsx)(n.code,{children:"Epoch Number reaches 37400000"})," (around Feb.28th 12:00). Hardfork upgrade completed at this time."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u6d4b\u8bd5\u7f51\u5347\u7ea7\u8ba1\u5212",children:"\u6d4b\u8bd5\u7f51\u5347\u7ea7\u8ba1\u5212"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Conflux client program need to be updated before ",(0,r.jsx)(n.code,{children:"Epoch Number reaches 55095000"})," or ",(0,r.jsx)(n.code,{children:"Block Number reaches 68845000"})," (around 10:00 Dec.9th, 2021(GMT+8))"]}),"\n",(0,r.jsxs)(n.li,{children:["The PoS registration start at ",(0,r.jsx)(n.code,{children:"Block Number 68845000"})," (around Dec.9th at 10:00)"]}),"\n",(0,r.jsxs)(n.li,{children:["The PoS registration close at ",(0,r.jsx)(n.code,{children:"Block Number 69245000"})," (around Dec.11 at 18:00)"]}),"\n",(0,r.jsxs)(n.li,{children:["The deadline for adding pos_config is before ",(0,r.jsx)(n.code,{children:"Epoch Number reaches 55665000"})," (around Dec.13th 15:00). Hardfork upgrade completed at this time."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b ",(0,r.jsx)(n.a,{href:"https://forum.conflux.fun/t/conflux-v2-0-0-testnet-hardfork-upgrade-announcement/12556",children:"Conflux v2.0.0-testnet \u786c\u5206\u53c9\u5347\u7ea7\u516c\u544a"}),"\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u5347\u7ea7-cip-\u5217\u8868",children:"\u5347\u7ea7 CIP \u5217\u8868"}),"\n",(0,r.jsx)(n.p,{children:"\u4ee5\u4e0b\u662f\u8fd9\u4e9b CIP \u7684\u7b80\u8981\u4ecb\u7ecd\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"cip-43",children:"CIP-43"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/Conflux-Chain/CIPs/blob/master/CIPs/cip-43.md",children:"\u8be6\u7ec6\u94fe\u63a5"})}),"\n",(0,r.jsxs)(n.p,{children:["In this ",(0,r.jsx)(n.a,{href:"https://github.com/Conflux-Chain/CIPs/blob/master/CIPs/cip-43.md",children:"CIP"}),", we propose introducing finality to the Conflux chain via voting among staked CFX holders. This will increase the confidence of high-value transactions happening on Conflux in the future and protect Conflux against potential 51% attacks from PoW."]}),"\n",(0,r.jsx)(n.h3,{id:"cip-64",children:"CIP-64"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/Conflux-Chain/CIPs/blob/master/CIPs/cip-64.md",children:"\u8be6\u7ec6\u94fe\u63a5"})}),"\n",(0,r.jsx)(n.p,{children:"Currently, transactions on Conflux have no direct access to the number of the epoch they are executed in. To maintain EVM compatibility, this CIP introduces a new internal contract that makes this information available to contracts."}),"\n",(0,r.jsx)(n.h3,{id:"cip-71",children:"CIP-71"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/Conflux-Chain/CIPs/blob/master/CIPs/cip-71.md",children:"\u8be6\u7ec6\u94fe\u63a5"})}),"\n",(0,r.jsx)(n.p,{children:"Fully disable the anti-reentrancy for their contract."}),"\n",(0,r.jsx)(n.h3,{id:"cip-76",children:"CIP-76"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/Conflux-Chain/CIPs/blob/master/CIPs/cip-76.md",children:"\u8be6\u7ec6\u94fe\u63a5"})}),"\n",(0,r.jsx)(n.p,{children:"We should remove VM-related constraints in syncing blocks, like requiring the transactions to have enough gas limit."}),"\n",(0,r.jsx)(n.h3,{id:"cip-78",children:"CIP-78"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/Conflux-Chain/CIPs/blob/master/CIPs/cip-78.md",children:"\u8be6\u7ec6\u94fe\u63a5"})}),"\n",(0,r.jsx)(n.p,{children:"Fix incorrect fields in transaction receipt."}),"\n",(0,r.jsx)(n.h3,{id:"cip-86",children:"CIP-86"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/Conflux-Chain/CIPs/blob/master/CIPs/cip-86.md",children:"\u8be6\u7ec6\u94fe\u63a5"})}),"\n",(0,r.jsx)(n.p,{children:"Reduce the period of difficulty adjustment and apply the simple moving average method."}),"\n",(0,r.jsx)(n.h3,{id:"cip-90",children:"CIP-90"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/Conflux-Chain/CIPs/blob/master/CIPs/cip-90.md",children:"\u8be6\u7ec6\u94fe\u63a5"})}),"\n",(0,r.jsxs)(n.p,{children:["This CIP aims to introduce a new fully EVM-compatible space. The new space is called ",(0,r.jsx)(n.code,{children:"eSpace"}),", and the current space is called ",(0,r.jsx)(n.code,{children:"Core"})," Space. The eSpace follows the same rule as EVM and supports eth rpc like ",(0,r.jsx)(n.code,{children:"eth_getBalance"}),", so the tools from ethereum economics can be used on Conflux directly."]}),"\n",(0,r.jsx)(n.h3,{id:"cip-92",children:"CIP-92"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/Conflux-Chain/CIPs/blob/master/CIPs/cip-92.md",children:"\u8be6\u7ec6\u94fe\u63a5"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5728 ",(0,r.jsx)(n.a,{href:"https://github.com/ethereum/EIPs/blob/master/EIPS/eip-152.md",children:"EIP-152"})," \u4e2d\u542f\u7528 Blake2F \u5185\u7f6e\u51fd\u6570\u3002"]})]})}function a(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},11151:(e,n,c)=>{c.d(n,{Z:()=>o,a:()=>l});var r=c(67294);const s={},i=r.createContext(s);function l(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);